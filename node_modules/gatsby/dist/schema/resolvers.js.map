{"version":3,"sources":["../../src/schema/resolvers.js"],"names":["systemPath","require","normalize","_","GraphQLList","getNullableType","getNamedType","Kind","getValueAt","findMany","typeName","args","context","info","nodeModel","runQuery","query","firstOnly","type","schema","getType","path","connectionType","findOne","filter","findManyPaginated","rp","group","projection","getProjectedField","distinct","result","paginate","skip","limit","source","field","edges","values","reduce","acc","node","value","concat","Date","toISOString","Array","from","Set","sort","groupedResults","isArray","forEach","key","Object","keys","fieldValue","push","results","count","length","items","slice","pageCount","Math","ceil","currentPage","hasPreviousPage","hasNextPage","totalCount","map","item","i","arr","next","previous","nodes","pageInfo","itemCount","perPage","link","by","fieldName","isPlainObject","returnType","getNodesByIds","ids","getNodeById","id","equals","eq","oneOf","in","operator","split","reduceRight","find","obj","fileByPath","findLinkedFileNode","relativePath","fileLinkPath","resolve","parentFileNode","dir","linkedFileNode","getAllNodes","n","absolutePath","findRootNodeAncestor","internal","resolveValue","v","selectionSet","fieldNodes","getFieldNodeByNameInSelectionSet","fieldEnum","getFields","arg","name","fieldNode","fieldArg","arguments","enumKey","getValue","selections","selection","kind","FRAGMENT_SPREAD","fragmentDef","fragments","INLINE_FRAGMENT","module","exports"],"mappings":"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","sourcesContent":["const systemPath = require(`path`)\nconst normalize = require(`normalize-path`)\nconst _ = require(`lodash`)\nconst { GraphQLList, getNullableType, getNamedType, Kind } = require(`graphql`)\nconst { getValueAt } = require(`../utils/get-value-at`)\n\nconst findMany = typeName => ({ args, context, info }) =>\n  context.nodeModel.runQuery(\n    {\n      query: args,\n      firstOnly: false,\n      type: info.schema.getType(typeName),\n    },\n    { path: context.path, connectionType: typeName }\n  )\n\nconst findOne = typeName => ({ args, context, info }) =>\n  context.nodeModel.runQuery(\n    {\n      query: { filter: args },\n      firstOnly: true,\n      type: info.schema.getType(typeName),\n    },\n    { path: context.path }\n  )\n\nconst findManyPaginated = typeName => async rp => {\n  // Peek into selection set and pass on the `field` arg of `group` and\n  // `distinct` which might need to be resolved. The easiest way to check if\n  // `group` or `distinct` are in the selection set is with the `projection`\n  // field which is added by `graphql-compose`'s `Resolver`. If we find it\n  // there, get the actual `field` arg.\n  const group = rp.projection.group && getProjectedField(rp.info, `group`)\n  const distinct =\n    rp.projection.distinct && getProjectedField(rp.info, `distinct`)\n  const args = { ...rp.args, group: group || [], distinct: distinct || [] }\n\n  const result = await findMany(typeName)({ ...rp, args })\n  return paginate(result, { skip: rp.args.skip, limit: rp.args.limit })\n}\n\nconst distinct = (source, args, context, info) => {\n  const { field } = args\n  const { edges } = source\n  const values = edges.reduce((acc, { node }) => {\n    const value = getValueAt(node, field)\n    return value != null\n      ? acc.concat(value instanceof Date ? value.toISOString() : value)\n      : acc\n  }, [])\n  return Array.from(new Set(values)).sort()\n}\n\nconst group = (source, args, context, info) => {\n  const { field } = args\n  const { edges } = source\n  const groupedResults = edges.reduce((acc, { node }) => {\n    const value = getValueAt(node, field)\n    const values = Array.isArray(value) ? value : [value]\n    values\n      .filter(value => value != null)\n      .forEach(value => {\n        const key = value instanceof Date ? value.toISOString() : value\n        acc[key] = (acc[key] || []).concat(node)\n      })\n    return acc\n  }, {})\n  return Object.keys(groupedResults)\n    .sort()\n    .reduce((acc, fieldValue) => {\n      acc.push({\n        ...paginate(groupedResults[fieldValue], args),\n        field,\n        fieldValue,\n      })\n      return acc\n    }, [])\n}\n\nconst paginate = (results = [], { skip = 0, limit }) => {\n  if (results === null) {\n    results = []\n  }\n\n  const count = results.length\n  const items = results.slice(skip, limit && skip + limit)\n\n  const pageCount = limit\n    ? Math.ceil(skip / limit) + Math.ceil((count - skip) / limit)\n    : skip\n    ? 2\n    : 1\n  const currentPage = limit ? Math.ceil(skip / limit) + 1 : skip ? 2 : 1\n  const hasPreviousPage = currentPage > 1\n  const hasNextPage = skip + limit < count\n\n  return {\n    totalCount: count,\n    edges: items.map((item, i, arr) => {\n      return {\n        node: item,\n        next: arr[i + 1],\n        previous: arr[i - 1],\n      }\n    }),\n    nodes: items,\n    pageInfo: {\n      currentPage,\n      hasPreviousPage,\n      hasNextPage,\n      itemCount: items.length,\n      pageCount,\n      perPage: limit,\n    },\n  }\n}\n\nconst link = ({ by = `id`, from }) => async (source, args, context, info) => {\n  const fieldValue = source && source[from || info.fieldName]\n\n  if (fieldValue == null || _.isPlainObject(fieldValue)) return fieldValue\n  if (\n    Array.isArray(fieldValue) &&\n    (fieldValue[0] == null || _.isPlainObject(fieldValue[0]))\n  ) {\n    return fieldValue\n  }\n\n  const returnType = getNullableType(info.returnType)\n  const type = getNamedType(returnType)\n\n  if (by === `id`) {\n    if (Array.isArray(fieldValue)) {\n      return context.nodeModel.getNodesByIds(\n        { ids: fieldValue, type: type },\n        { path: context.path }\n      )\n    } else {\n      return context.nodeModel.getNodeById(\n        { id: fieldValue, type: type },\n        { path: context.path }\n      )\n    }\n  }\n\n  const equals = value => {\n    return { eq: value }\n  }\n  const oneOf = value => {\n    return { in: value }\n  }\n  const operator = Array.isArray(fieldValue) ? oneOf : equals\n  args.filter = by.split(`.`).reduceRight((acc, key, i, { length }) => {\n    return {\n      [key]: i === length - 1 ? operator(acc) : acc,\n    }\n  }, fieldValue)\n\n  const result = await context.nodeModel.runQuery(\n    { query: args, firstOnly: !(returnType instanceof GraphQLList), type },\n    { path: context.path }\n  )\n  if (\n    returnType instanceof GraphQLList &&\n    Array.isArray(fieldValue) &&\n    Array.isArray(result)\n  ) {\n    return fieldValue.map(value =>\n      result.find(obj => getValueAt(obj, by) === value)\n    )\n  } else {\n    return result\n  }\n}\n\nconst fileByPath = ({ from }) => (source, args, context, info) => {\n  const fieldValue = source && source[from || info.fieldName]\n\n  if (fieldValue == null || _.isPlainObject(fieldValue)) return fieldValue\n  if (\n    Array.isArray(fieldValue) &&\n    (fieldValue[0] == null || _.isPlainObject(fieldValue[0]))\n  ) {\n    return fieldValue\n  }\n\n  const findLinkedFileNode = relativePath => {\n    // Use the parent File node to create the absolute path to\n    // the linked file.\n    const fileLinkPath = normalize(\n      systemPath.resolve(parentFileNode.dir, relativePath)\n    )\n\n    // Use that path to find the linked File node.\n    const linkedFileNode = _.find(\n      context.nodeModel.getAllNodes({ type: `File` }),\n      n => n.absolutePath === fileLinkPath\n    )\n    return linkedFileNode\n  }\n\n  // Find the File node for this node (we assume the node is something\n  // like markdown which would be a child node of a File node).\n  const parentFileNode = context.nodeModel.findRootNodeAncestor(\n    source,\n    node => node.internal && node.internal.type === `File`\n  )\n\n  return resolveValue(findLinkedFileNode, fieldValue)\n}\n\nconst resolveValue = (resolve, value) =>\n  Array.isArray(value)\n    ? value.map(v => resolveValue(resolve, v))\n    : resolve(value)\n\nconst getProjectedField = (info, fieldName) => {\n  const selectionSet = info.fieldNodes[0].selectionSet\n  const fieldNodes = getFieldNodeByNameInSelectionSet(\n    selectionSet,\n    fieldName,\n    info\n  )\n\n  const fieldEnum = getNullableType(\n    getNullableType(info.returnType)\n      .getFields()\n      [fieldName].args.find(arg => arg.name === `field`).type\n  )\n\n  return fieldNodes.reduce((acc, fieldNode) => {\n    const fieldArg = fieldNode.arguments.find(arg => arg.name.value === `field`)\n    if (fieldArg) {\n      const enumKey = fieldArg.value.value\n      return [...acc, fieldEnum.getValue(enumKey).value]\n    } else {\n      return acc\n    }\n  }, [])\n}\n\nconst getFieldNodeByNameInSelectionSet = (selectionSet, fieldName, info) =>\n  selectionSet.selections.reduce((acc, selection) => {\n    if (selection.kind === Kind.FRAGMENT_SPREAD) {\n      const fragmentDef = info.fragments[selection.name.value]\n      if (fragmentDef) {\n        return [\n          ...acc,\n          ...getFieldNodeByNameInSelectionSet(\n            fragmentDef.selectionSet,\n            fieldName,\n            info\n          ),\n        ]\n      }\n    } else if (selection.kind === Kind.INLINE_FRAGMENT) {\n      return [\n        ...acc,\n        ...getFieldNodeByNameInSelectionSet(\n          selection.selectionSet,\n          fieldName,\n          info\n        ),\n      ]\n    } /* FIELD_NODE */ else {\n      if (selection.name.value === fieldName) {\n        return [...acc, selection]\n      }\n    }\n    return acc\n  }, [])\n\nmodule.exports = {\n  findManyPaginated,\n  findOne,\n  fileByPath,\n  link,\n  distinct,\n  group,\n  paginate,\n}\n"],"file":"resolvers.js"}