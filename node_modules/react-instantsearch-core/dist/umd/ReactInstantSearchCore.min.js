/*! React InstantSearchCore 5.7.0 | Â© Algolia, inc. | https://github.com/algolia/react-instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactInstantSearchCore={},e.React)}(this,function(e,p){"use strict";var v="default"in p?p.default:p;function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return(n="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}var c=o,u=s;function f(t){if(c===setTimeout)return setTimeout(t,0);if((c===o||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}"function"==typeof a.setTimeout&&(c=setTimeout),"function"==typeof a.clearTimeout&&(u=clearTimeout);var l,h=[],d=!1,_=-1;function j(){d&&l&&(d=!1,l.length?h=l.concat(h):_=-1,h.length&&P())}function P(){if(!d){var e=f(j);d=!0;for(var t=h.length;t;){for(l=h,h=[];++_<t;)l&&l[_].run();_=-1,t=h.length}l=null,d=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===s||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(e)}}function w(e,t){this.fun=e,this.array=t}w.prototype.run=function(){this.fun.apply(null,this.array)};function S(){}var O=S,A=S,E=S,T=S,N=S,I=S,C=S;var H=a.performance||{},D=H.now||H.mozNow||H.msNow||H.oNow||H.webkitNow||function(){return(new Date).getTime()};var Q=new Date;var M={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new w(e,t)),1!==h.length||d||f(P)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:O,addListener:A,once:E,off:T,removeListener:N,removeAllListeners:I,emit:C,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*D.call(H),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Q)/1e3}},L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function B(e,t){return e(t={exports:{}},t.exports),t.exports}var k=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;function V(){}var W=B(function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=V,n.PropTypes=n}()});function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){F(t,e,n[e])})}return t}var $=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var K=function(){this.__data__=[],this.size=0};var G=function(e,t){return e===t||e!=e&&t!=t};var J=function(e,t){for(var n=e.length;n--;)if(G(e[n][0],t))return n;return-1},Y=Array.prototype.splice;var Z=function(e){var t=this.__data__,n=J(t,e);return!(n<0||(n==t.length-1?t.pop():Y.call(t,n,1),--this.size,0))};var X=function(e){var t=this.__data__,n=J(t,e);return n<0?void 0:t[n][1]};var ee=function(e){return-1<J(this.__data__,e)};var te=function(e,t){var n=this.__data__,r=J(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ne.prototype.clear=K,ne.prototype.delete=Z,ne.prototype.get=X,ne.prototype.has=ee,ne.prototype.set=te;var re=ne;var ie=function(){this.__data__=new re,this.size=0};var ae=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var oe=function(e){return this.__data__.get(e)};var se=function(e){return this.__data__.has(e)},ce="object"==typeof L&&L&&L.Object===Object&&L,ue="object"==typeof self&&self&&self.Object===Object&&self,fe=ce||ue||Function("return this")(),le=fe.Symbol,he=Object.prototype,de=he.hasOwnProperty,pe=he.toString,ve=le?le.toStringTag:void 0;var me=function(e){var t=de.call(e,ve),n=e[ve];try{var r=!(e[ve]=void 0)}catch(e){}var i=pe.call(e);return r&&(t?e[ve]=n:delete e[ve]),i},ge=Object.prototype.toString;var ye=function(e){return ge.call(e)},be=le?le.toStringTag:void 0;var Re=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":be&&be in Object(e)?me(e):ye(e)};var xe=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Fe,_e=function(e){if(!xe(e))return!1;var t=Re(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},je=fe["__core-js_shared__"],Pe=(Fe=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+Fe:"";var we=function(e){return!!Pe&&Pe in e},Se=Function.prototype.toString;var Oe=function(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ae=/^\[object .+?Constructor\]$/,Ee=Function.prototype,Te=Object.prototype,Ne=Ee.toString,Ie=Te.hasOwnProperty,Ce=RegExp("^"+Ne.call(Ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var He=function(e){return!(!xe(e)||we(e))&&(_e(e)?Ce:Ae).test(Oe(e))};var De=function(e,t){return null==e?void 0:e[t]};var Qe=function(e,t){var n=De(e,t);return He(n)?n:void 0},Me=Qe(fe,"Map"),Le=Qe(Object,"create");var Be=function(){this.__data__=Le?Le(null):{},this.size=0};var ke=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ue=Object.prototype.hasOwnProperty;var qe=function(e){var t=this.__data__;if(Le){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ue.call(t,e)?t[e]:void 0},Ve=Object.prototype.hasOwnProperty;var We=function(e){var t=this.__data__;return Le?void 0!==t[e]:Ve.call(t,e)};var ze=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Le&&void 0===t?"__lodash_hash_undefined__":t,this};function $e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$e.prototype.clear=Be,$e.prototype.delete=ke,$e.prototype.get=qe,$e.prototype.has=We,$e.prototype.set=ze;var Ke=$e;var Ge=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Je=function(e,t){var n=e.__data__;return Ge(t)?n["string"==typeof t?"string":"hash"]:n.map};var Ye=function(e){var t=Je(this,e).delete(e);return this.size-=t?1:0,t};var Ze=function(e){return Je(this,e).get(e)};var Xe=function(e){return Je(this,e).has(e)};var et=function(e,t){var n=Je(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function tt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ke,map:new(Me||re),string:new Ke}},tt.prototype.delete=Ye,tt.prototype.get=Ze,tt.prototype.has=Xe,tt.prototype.set=et;var nt=tt;var rt=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!Me||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new nt(r)}return n.set(e,t),this.size=n.size,this};function it(e){var t=this.__data__=new re(e);this.size=t.size}it.prototype.clear=ie,it.prototype.delete=ae,it.prototype.get=oe,it.prototype.has=se,it.prototype.set=rt;var at=it;var ot=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},st=function(){try{var e=Qe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var ct=function(e,t,n){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ut=Object.prototype.hasOwnProperty;var ft=function(e,t,n){var r=e[t];ut.call(e,t)&&G(r,n)&&(void 0!==n||t in e)||ct(e,t,n)};var lt=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?ct(n,s,c):ft(n,s,c)}return n};var ht=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var dt=function(e){return null!=e&&"object"==typeof e};var pt=function(e){return dt(e)&&"[object Arguments]"==Re(e)},vt=Object.prototype,mt=vt.hasOwnProperty,gt=vt.propertyIsEnumerable,yt=pt(function(){return arguments}())?pt:function(e){return dt(e)&&mt.call(e,"callee")&&!gt.call(e,"callee")},bt=Array.isArray;var Rt=function(){return!1},xt=B(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?fe.Buffer:void 0,a=(i?i.isBuffer:void 0)||Rt;e.exports=a}),Ft=/^(?:0|[1-9]\d*)$/;var _t=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ft.test(e))&&-1<e&&e%1==0&&e<t};var jt=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},Pt={};Pt["[object Float32Array]"]=Pt["[object Float64Array]"]=Pt["[object Int8Array]"]=Pt["[object Int16Array]"]=Pt["[object Int32Array]"]=Pt["[object Uint8Array]"]=Pt["[object Uint8ClampedArray]"]=Pt["[object Uint16Array]"]=Pt["[object Uint32Array]"]=!0,Pt["[object Arguments]"]=Pt["[object Array]"]=Pt["[object ArrayBuffer]"]=Pt["[object Boolean]"]=Pt["[object DataView]"]=Pt["[object Date]"]=Pt["[object Error]"]=Pt["[object Function]"]=Pt["[object Map]"]=Pt["[object Number]"]=Pt["[object Object]"]=Pt["[object RegExp]"]=Pt["[object Set]"]=Pt["[object String]"]=Pt["[object WeakMap]"]=!1;var wt=function(e){return dt(e)&&jt(e.length)&&!!Pt[Re(e)]};var St=function(t){return function(e){return t(e)}},Ot=B(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n&&ce.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),At=Ot&&Ot.isTypedArray,Et=At?St(At):wt,Tt=Object.prototype.hasOwnProperty;var Nt=function(e,t){var n=bt(e),r=!n&&yt(e),i=!n&&!r&&xt(e),a=!n&&!r&&!i&&Et(e),o=n||r||i||a,s=o?ht(e.length,String):[],c=s.length;for(var u in e)!t&&!Tt.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_t(u,c))||s.push(u);return s},It=Object.prototype;var Ct=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||It)};var Ht=function(t,n){return function(e){return t(n(e))}},Dt=Ht(Object.keys,Object),Qt=Object.prototype.hasOwnProperty;var Mt=function(e){if(!Ct(e))return Dt(e);var t=[];for(var n in Object(e))Qt.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Lt=function(e){return null!=e&&jt(e.length)&&!_e(e)};var Bt=function(e){return Lt(e)?Nt(e):Mt(e)};var kt=function(e,t){return e&&lt(t,Bt(t),e)};var Ut=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},qt=Object.prototype.hasOwnProperty;var Vt=function(e){if(!xe(e))return Ut(e);var t=Ct(e),n=[];for(var r in e)("constructor"!=r||!t&&qt.call(e,r))&&n.push(r);return n};var Wt=function(e){return Lt(e)?Nt(e,!0):Vt(e)};var zt=function(e,t){return e&&lt(t,Wt(t),e)},$t=B(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?fe.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}});var Kt=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Gt=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var Jt=function(){return[]},Yt=Object.prototype.propertyIsEnumerable,Zt=Object.getOwnPropertySymbols,Xt=Zt?function(t){return null==t?[]:(t=Object(t),Gt(Zt(t),function(e){return Yt.call(t,e)}))}:Jt;var en=function(e,t){return lt(e,Xt(e),t)};var tn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},nn=Ht(Object.getPrototypeOf,Object),rn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)tn(t,Xt(e)),e=nn(e);return t}:Jt;var an=function(e,t){return lt(e,rn(e),t)};var on=function(e,t,n){var r=t(e);return bt(e)?r:tn(r,n(e))};var sn=function(e){return on(e,Bt,Xt)};var cn=function(e){return on(e,Wt,rn)},un=Qe(fe,"DataView"),fn=Qe(fe,"Promise"),ln=Qe(fe,"Set"),hn=Qe(fe,"WeakMap"),dn="[object Map]",pn="[object Promise]",vn="[object Set]",mn="[object WeakMap]",gn="[object DataView]",yn=Oe(un),bn=Oe(Me),Rn=Oe(fn),xn=Oe(ln),Fn=Oe(hn),_n=Re;(un&&_n(new un(new ArrayBuffer(1)))!=gn||Me&&_n(new Me)!=dn||fn&&_n(fn.resolve())!=pn||ln&&_n(new ln)!=vn||hn&&_n(new hn)!=mn)&&(_n=function(e){var t=Re(e),n="[object Object]"==t?e.constructor:void 0,r=n?Oe(n):"";if(r)switch(r){case yn:return gn;case bn:return dn;case Rn:return pn;case xn:return vn;case Fn:return mn}return t});var jn=_n,Pn=Object.prototype.hasOwnProperty;var wn=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Pn.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Sn=fe.Uint8Array;var On=function(e){var t=new e.constructor(e.byteLength);return new Sn(t).set(new Sn(e)),t};var An=function(e,t){var n=t?On(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},En=/\w*$/;var Tn=function(e){var t=new e.constructor(e.source,En.exec(e));return t.lastIndex=e.lastIndex,t},Nn=le?le.prototype:void 0,In=Nn?Nn.valueOf:void 0;var Cn=function(e){return In?Object(In.call(e)):{}};var Hn=function(e,t){var n=t?On(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Dn=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return On(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return An(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hn(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Tn(e);case"[object Set]":return new r;case"[object Symbol]":return Cn(e)}},Qn=Object.create,Mn=function(){function n(){}return function(e){if(!xe(e))return{};if(Qn)return Qn(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();var Ln=function(e){return"function"!=typeof e.constructor||Ct(e)?{}:Mn(nn(e))};var Bn=function(e){return dt(e)&&"[object Map]"==jn(e)},kn=Ot&&Ot.isMap,Un=kn?St(kn):Bn;var qn=function(e){return dt(e)&&"[object Set]"==jn(e)},Vn=Ot&&Ot.isSet,Wn=Vn?St(Vn):qn,zn=1,$n=2,Kn=4,Gn="[object Arguments]",Jn="[object Function]",Yn="[object GeneratorFunction]",Zn="[object Object]",Xn={};Xn[Gn]=Xn["[object Array]"]=Xn["[object ArrayBuffer]"]=Xn["[object DataView]"]=Xn["[object Boolean]"]=Xn["[object Date]"]=Xn["[object Float32Array]"]=Xn["[object Float64Array]"]=Xn["[object Int8Array]"]=Xn["[object Int16Array]"]=Xn["[object Int32Array]"]=Xn["[object Map]"]=Xn["[object Number]"]=Xn[Zn]=Xn["[object RegExp]"]=Xn["[object Set]"]=Xn["[object String]"]=Xn["[object Symbol]"]=Xn["[object Uint8Array]"]=Xn["[object Uint8ClampedArray]"]=Xn["[object Uint16Array]"]=Xn["[object Uint32Array]"]=!0,Xn["[object Error]"]=Xn[Jn]=Xn["[object WeakMap]"]=!1;var er=function n(r,i,a,e,t,o){var s,c=i&zn,u=i&$n,f=i&Kn;if(a&&(s=t?a(r,e,t,o):a(r)),void 0!==s)return s;if(!xe(r))return r;var l=bt(r);if(l){if(s=wn(r),!c)return Kt(r,s)}else{var h=jn(r),d=h==Jn||h==Yn;if(xt(r))return $t(r,c);if(h==Zn||h==Gn||d&&!t){if(s=u||d?{}:Ln(r),!c)return u?an(r,zt(s,r)):en(r,kt(s,r))}else{if(!Xn[h])return t?r:{};s=Dn(r,h,c)}}o||(o=new at);var p=o.get(r);if(p)return p;if(o.set(r,s),Wn(r))return r.forEach(function(e){s.add(n(e,i,a,e,r,o))}),s;if(Un(r))return r.forEach(function(e,t){s.set(t,n(e,i,a,t,r,o))}),s;var v=f?u?cn:sn:u?keysIn:Bt,m=l?void 0:v(r);return ot(m||r,function(e,t){m&&(e=r[t=e]),ft(s,t,n(e,i,a,t,r,o))}),s};var tr=function(e){return"symbol"==typeof e||dt(e)&&"[object Symbol]"==Re(e)},nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rr=/^\w*$/;var ir=function(e,t){if(bt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!tr(e))||rr.test(e)||!nr.test(e)||null!=t&&e in Object(t)},ar="Expected a function";function or(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new TypeError(ar);var o=function(){var e=arguments,t=a?a.apply(this,e):e[0],n=o.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return o.cache=n.set(t,r)||n,r};return o.cache=new(or.Cache||nt),o}or.Cache=nt;var sr=or;var cr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ur=/\\(\\)?/g,fr=function(e){var t=sr(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(cr,function(e,t,n,r){i.push(n?r.replace(ur,"$1"):t||e)}),i}),lr=1/0,hr=le?le.prototype:void 0,dr=hr?hr.toString:void 0;var pr=function e(t){if("string"==typeof t)return t;if(bt(t))return $(t,e)+"";if(tr(t))return dr?dr.call(t):"";var n=t+"";return"0"==n&&1/t==-lr?"-0":n};var vr=function(e){return null==e?"":pr(e)};var mr=function(e,t){return bt(e)?e:ir(e,t)?[e]:fr(vr(e))};var gr=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var yr=function(e){if("string"==typeof e||tr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var br=function(e,t){for(var n=0,r=(t=mr(t,e)).length;null!=e&&n<r;)e=e[yr(t[n++])];return n&&n==r?e:void 0};var Rr=function(e,t,n){var r=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(n=i<n?i:n)<0&&(n+=i),i=n<t?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var xr=function(e,t){return t.length<2?e:br(e,Rr(t,0,-1))};var Fr=function(e,t){return t=mr(t,e),null==(e=xr(e,t))||delete e[yr(gr(t))]},_r=Function.prototype,jr=Object.prototype,Pr=_r.toString,wr=jr.hasOwnProperty,Sr=Pr.call(Object);var Or=function(e){if(!dt(e)||"[object Object]"!=Re(e))return!1;var t=nn(e);if(null===t)return!0;var n=wr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pr.call(n)==Sr};var Ar=function(e){return Or(e)?void 0:e},Er=le?le.isConcatSpreadable:void 0;var Tr=function(e){return bt(e)||yt(e)||!!(Er&&e&&e[Er])};var Nr=function e(t,n,r,i,a){var o=-1,s=t.length;for(r||(r=Tr),a||(a=[]);++o<s;){var c=t[o];0<n&&r(c)?1<n?e(c,n-1,r,i,a):tn(a,c):i||(a[a.length]=c)}return a};var Ir=function(e){return null!=e&&e.length?Nr(e,1):[]};var Cr=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Hr=Math.max;var Dr=function(a,o,s){return o=Hr(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,n=Hr(e.length-o,0),r=Array(n);++t<n;)r[t]=e[o+t];t=-1;for(var i=Array(o+1);++t<o;)i[t]=e[t];return i[o]=s(r),Cr(a,this,i)}};var Qr=function(e){return function(){return e}};var Mr=function(e){return e},Lr=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:Qr(t),writable:!0})}:Mr,Br=Date.now;var kr=function(n){var r=0,i=0;return function(){var e=Br(),t=16-(e-i);if(i=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}},Ur=kr(Lr);var qr=function(e){return Ur(Dr(e,void 0,Ir),e+"")},Vr=qr(function(t,e){var n={};if(null==t)return n;var r=!1;e=$(e,function(e){return e=mr(e,t),r||(r=1<e.length),e}),lt(t,cn(t),n),r&&(n=er(n,7,Ar));for(var i=e.length;i--;)Fr(n,e[i]);return n});var Wr=function(e){return this.__data__.has(e)};function zr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nt;++t<n;)this.add(e[t])}zr.prototype.add=zr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},zr.prototype.has=Wr;var $r=zr;var Kr=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var Gr=function(e){return e!=e};var Jr=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var Yr=function(e,t,n){return t==t?Jr(e,t,n):Kr(e,Gr,n)};var Zr=function(e,t){return!(null==e||!e.length)&&-1<Yr(e,t,0)};var Xr=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var ei=function(e,t){return e.has(t)},ti=Math.min;var ni=function(e,t,n){for(var r=n?Xr:Zr,i=e[0].length,a=e.length,o=a,s=Array(a),c=1/0,u=[];o--;){var f=e[o];o&&t&&(f=$(f,St(t))),c=ti(f.length,c),s[o]=!n&&(t||120<=i&&120<=f.length)?new $r(o&&f):void 0}f=e[0];var l=-1,h=s[0];e:for(;++l<i&&u.length<c;){var d=f[l],p=t?t(d):d;if(d=n||0!==d?d:0,!(h?ei(h,p):r(u,p,n))){for(o=a;--o;){var v=s[o];if(!(v?ei(v,p):r(e[o],p,n)))continue e}h&&h.push(p),u.push(d)}}return u};var ri=function(e,t){return Ur(Dr(e,t,Mr),e+"")};var ii=function(e){return dt(e)&&Lt(e)};var ai=function(e){return ii(e)?e:[]},oi=ri(function(e){var t=$(e,ai);return t.length&&t[0]===e[0]?ni(t):[]});var si=function(c){return function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[c?o:++r];if(!1===t(i[s],s,i))break}return e}}();var ci=function(e,t){return e&&si(e,t,Bt)};var ui=function(e){return"function"==typeof e?e:Mr};var fi=function(e,t){return e&&ci(e,ui(t))};var li=function(a,o){return function(e,t){if(null==e)return e;if(!Lt(e))return a(e,t);for(var n=e.length,r=o?n:-1,i=Object(e);(o?r--:++r<n)&&!1!==t(i[r],r,i););return e}}(ci);var hi=function(e,t){return(bt(e)?ot:li)(e,ui(t))};var di=function(e,r){var i=[];return li(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i};var pi=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var vi=function(e,t,n,r,i,a){var o=1&n,s=e.length,c=t.length;if(s!=c&&!(o&&s<c))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var f=-1,l=!0,h=2&n?new $r:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var d=e[f],p=t[f];if(r)var v=o?r(p,d,f,t,e,a):r(d,p,f,e,t,a);if(void 0!==v){if(v)continue;l=!1;break}if(h){if(!pi(t,function(e,t){if(!ei(h,t)&&(d===e||i(d,e,n,r,a)))return h.push(t)})){l=!1;break}}else if(d!==p&&!i(d,p,n,r,a)){l=!1;break}}return a.delete(e),a.delete(t),l};var mi=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r};var gi=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},yi=le?le.prototype:void 0,bi=yi?yi.valueOf:void 0;var Ri=function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Sn(e),new Sn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return G(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=mi;case"[object Set]":var c=1&r;if(s||(s=gi),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var f=vi(s(e),s(t),r,i,a,o);return o.delete(e),f;case"[object Symbol]":if(bi)return bi.call(e)==bi.call(t)}return!1},xi=Object.prototype.hasOwnProperty;var Fi=function(e,t,n,r,i,a){var o=1&n,s=sn(e),c=s.length;if(c!=sn(t).length&&!o)return!1;for(var u=c;u--;){var f=s[u];if(!(o?f in t:xi.call(t,f)))return!1}var l=a.get(e);if(l&&a.get(t))return l==t;var h=!0;a.set(e,t),a.set(t,e);for(var d=o;++u<c;){var p=e[f=s[u]],v=t[f];if(r)var m=o?r(v,p,f,t,e,a):r(p,v,f,e,t,a);if(!(void 0===m?p===v||i(p,v,n,r,a):m)){h=!1;break}d||(d="constructor"==f)}if(h&&!d){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(h=!1)}return a.delete(e),a.delete(t),h},_i="[object Arguments]",ji="[object Array]",Pi="[object Object]",wi=Object.prototype.hasOwnProperty;var Si=function(e,t,n,r,i,a){var o=bt(e),s=bt(t),c=o?ji:jn(e),u=s?ji:jn(t),f=(c=c==_i?Pi:c)==Pi,l=(u=u==_i?Pi:u)==Pi,h=c==u;if(h&&xt(e)){if(!xt(t))return!1;f=!(o=!0)}if(h&&!f)return a||(a=new at),o||Et(e)?vi(e,t,n,r,i,a):Ri(e,t,c,n,r,i,a);if(!(1&n)){var d=f&&wi.call(e,"__wrapped__"),p=l&&wi.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,m=p?t.value():t;return a||(a=new at),i(v,m,n,r,a)}}return!!h&&(a||(a=new at),Fi(e,t,n,r,i,a))};var Oi=function e(t,n,r,i,a){return t===n||(null==t||null==n||!dt(t)&&!dt(n)?t!=t&&n!=n:Si(t,n,r,i,e,a))};var Ai=function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var c=(s=n[i])[0],u=e[c],f=s[1];if(o&&s[2]){if(void 0===u&&!(c in e))return!1}else{var l=new at;if(r)var h=r(u,f,c,e,t,l);if(!(void 0===h?Oi(f,u,3,r,l):h))return!1}}return!0};var Ei=function(e){return e==e&&!xe(e)};var Ti=function(e){for(var t=Bt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ei(i)]}return t};var Ni=function(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}};var Ii=function(t){var n=Ti(t);return 1==n.length&&n[0][2]?Ni(n[0][0],n[0][1]):function(e){return e===t||Ai(e,t,n)}};var Ci=function(e,t,n){var r=null==e?void 0:br(e,t);return void 0===r?n:r};var Hi=function(e,t){return null!=e&&t in Object(e)};var Di=function(e,t,n){for(var r=-1,i=(t=mr(t,e)).length,a=!1;++r<i;){var o=yr(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&jt(i)&&_t(o,i)&&(bt(e)||yt(e))};var Qi=function(e,t){return null!=e&&Di(e,t,Hi)};var Mi=function(n,r){return ir(n)&&Ei(r)?Ni(yr(n),r):function(e){var t=Ci(e,n);return void 0===t&&t===r?Qi(e,n):Oi(r,t,3)}};var Li=function(t){return function(e){return null==e?void 0:e[t]}};var Bi=function(t){return function(e){return br(e,t)}};var ki=function(e){return ir(e)?Li(yr(e)):Bi(e)};var Ui=function(e){return"function"==typeof e?e:null==e?Mr:"object"==typeof e?bt(e)?Mi(e[0],e[1]):Ii(e):ki(e)};var qi=function(e,t){return(bt(e)?Gt:di)(e,Ui(t,3))};var Vi=function(e,r){var i=-1,a=Lt(e)?Array(e.length):[];return li(e,function(e,t,n){a[++i]=r(e,t,n)}),a};var Wi=function(e,t){return(bt(e)?$:Vi)(e,Ui(t,3))};var zi=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n};var $i=function(e,r,i,a,t){return t(e,function(e,t,n){i=a?(a=!1,e):r(i,e,t,n)}),i};var Ki=function(e,t,n){var r=bt(e)?zi:$i,i=arguments.length<3;return r(e,Ui(t,4),n,i,li)},Gi=/^\s+|\s+$/g,Ji=/^[-+]0x[0-9a-f]+$/i,Yi=/^0b[01]+$/i,Zi=/^0o[0-7]+$/i,Xi=parseInt;var ea=function(e){if("number"==typeof e)return e;if(tr(e))return NaN;if(xe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Gi,"");var n=Yi.test(e);return n||Zi.test(e)?Xi(e.slice(2),n?2:8):Ji.test(e)?NaN:+e};var ta=function(e){return e?(e=ea(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0};var na=function(e){var t=ta(e),n=t%1;return t==t?n?t-n:t:0},ra=Math.max;var ia=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:na(n);return i<0&&(i=ra(r+i,0)),Yr(e,t,i)};var aa=function(e){return"number"==typeof e||dt(e)&&"[object Number]"==Re(e)};var oa=function(e){return aa(e)&&e!=+e},sa=Object.prototype.hasOwnProperty;var ca=function(e){if(null==e)return!0;if(Lt(e)&&(bt(e)||"string"==typeof e||"function"==typeof e.splice||xt(e)||Et(e)||yt(e)))return!e.length;var t=jn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ct(e))return!Mt(e).length;for(var n in e)if(sa.call(e,n))return!1;return!0};var ua=function(e,t){return Oi(e,t)};var fa=function(e){return void 0===e};var la=function(e){return"string"==typeof e||!bt(e)&&dt(e)&&"[object String]"==Re(e)};var ha=function(o){return function(e,t,n){var r=Object(e);if(!Lt(e)){var i=Ui(t,3);e=Bt(e),t=function(e){return i(r[e],e,r)}}var a=o(e,t,n);return-1<a?r[i?e[a]:a]:void 0}},da=Math.max;var pa=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:na(n);return i<0&&(i=da(r+i,0)),Kr(e,Ui(t,3),i)},va=ha(pa);var ma=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&r<=n?e:Rr(e,t,n)};var ga=function(e,t){for(var n=e.length;n--&&-1<Yr(t,e[n],0););return n};var ya=function(e,t){for(var n=-1,r=e.length;++n<r&&-1<Yr(t,e[n],0););return n};var ba=function(e){return e.split("")},Ra=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var xa=function(e){return Ra.test(e)},Fa="\\ud800-\\udfff",_a="["+Fa+"]",ja="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pa="\\ud83c[\\udffb-\\udfff]",wa="[^"+Fa+"]",Sa="(?:\\ud83c[\\udde6-\\uddff]){2}",Oa="[\\ud800-\\udbff][\\udc00-\\udfff]",Aa="(?:"+ja+"|"+Pa+")"+"?",Ea="[\\ufe0e\\ufe0f]?",Ta=Ea+Aa+("(?:\\u200d(?:"+[wa,Sa,Oa].join("|")+")"+Ea+Aa+")*"),Na="(?:"+[wa+ja+"?",ja,Sa,Oa,_a].join("|")+")",Ia=RegExp(Pa+"(?="+Pa+")|"+Na+Ta,"g");var Ca=function(e){return e.match(Ia)||[]};var Ha=function(e){return xa(e)?Ca(e):ba(e)},Da=/^\s+|\s+$/g;var Qa=function(e,t,n){if((e=vr(e))&&(n||void 0===t))return e.replace(Da,"");if(!e||!(t=pr(t)))return e;var r=Ha(e),i=Ha(t),a=ya(r,i),o=ga(r,i)+1;return ma(r,a,o).join("")};var Ma=function(e,t,n){if(!xe(n))return!1;var r=typeof t;return!!("number"==r?Lt(n)&&_t(t,n.length):"string"==r&&t in n)&&G(n[t],e)},La=Object.prototype,Ba=La.hasOwnProperty,ka=ri(function(e,t){e=Object(e);var n=-1,r=t.length,i=2<r?t[2]:void 0;for(i&&Ma(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],o=Wt(a),s=-1,c=o.length;++s<c;){var u=o[s],f=e[u];(void 0===f||G(f,La[u])&&!Ba.call(e,u))&&(e[u]=a[u])}return e});var Ua=function(e,t,n){(void 0===n||G(e[t],n))&&(void 0!==n||t in e)||ct(e,t,n)};var qa=function(e,t){if("__proto__"!=t)return e[t]};var Va=function(e){return lt(e,Wt(e))};var Wa=function(e,t,n,r,i,a,o){var s=qa(e,n),c=qa(t,n),u=o.get(c);if(u)Ua(e,n,u);else{var f=a?a(s,c,n+"",e,t,o):void 0,l=void 0===f;if(l){var h=bt(c),d=!h&&xt(c),p=!h&&!d&&Et(c);f=c,h||d||p?f=bt(s)?s:ii(s)?Kt(s):d?$t(c,!(l=!1)):p?Hn(c,!(l=!1)):[]:Or(c)||yt(c)?yt(f=s)?f=Va(s):xe(s)&&!_e(s)||(f=Ln(c)):l=!1}l&&(o.set(c,f),i(f,c,r,a,o),o.delete(c)),Ua(e,n,f)}};var za=function r(i,a,o,s,c){i!==a&&si(a,function(e,t){if(xe(e))c||(c=new at),Wa(i,a,t,o,r,s,c);else{var n=s?s(qa(i,t),e,t+"",i,a,c):void 0;void 0===n&&(n=e),Ua(i,t,n)}},Wt)};var $a=function(s){return ri(function(e,t){var n=-1,r=t.length,i=1<r?t[r-1]:void 0,a=2<r?t[2]:void 0;for(i=3<s.length&&"function"==typeof i?(r--,i):void 0,a&&Ma(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&s(e,o,n,i)}return e})}(function(e,t,n){za(e,t,n)});var Ka=function e(t){if(aa(t))return t;if(la(t))return parseFloat(t);if(Array.isArray(t))return Wi(t,e);throw new Error("The value should be a number, a parseable string or an array of those.")};var Ga=function(n,e){var r={},t=qi(e,function(e){return-1!==e.indexOf("attribute:")}),i=Wi(t,function(e){return e.split(":")[1]});-1===ia(i,"*")?hi(i,function(e){n.isConjunctiveFacet(e)&&n.isFacetRefined(e)&&(r.facetsRefinements||(r.facetsRefinements={}),r.facetsRefinements[e]=n.facetsRefinements[e]),n.isDisjunctiveFacet(e)&&n.isDisjunctiveFacetRefined(e)&&(r.disjunctiveFacetsRefinements||(r.disjunctiveFacetsRefinements={}),r.disjunctiveFacetsRefinements[e]=n.disjunctiveFacetsRefinements[e]),n.isHierarchicalFacet(e)&&n.isHierarchicalFacetRefined(e)&&(r.hierarchicalFacetsRefinements||(r.hierarchicalFacetsRefinements={}),r.hierarchicalFacetsRefinements[e]=n.hierarchicalFacetsRefinements[e]);var t=n.getNumericRefinements(e);ca(t)||(r.numericRefinements||(r.numericRefinements={}),r.numericRefinements[e]=n.numericRefinements[e])}):(ca(n.numericRefinements)||(r.numericRefinements=n.numericRefinements),ca(n.facetsRefinements)||(r.facetsRefinements=n.facetsRefinements),ca(n.disjunctiveFacetsRefinements)||(r.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements),ca(n.hierarchicalFacetsRefinements)||(r.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements));var a=qi(e,function(e){return-1===e.indexOf("attribute:")});return hi(a,function(e){r[e]=n[e]}),r},Ja={addRefinement:function(e,t,n){if(Ja.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],a={};return a[t]=i,ka({},a,e)},removeRefinement:function(e,n,t){if(fa(t))return Ja.clearRefinement(e,n);var r=""+t;return Ja.clearRefinement(e,function(e,t){return n===t&&r===e})},toggleRefinement:function(e,t,n){if(fa(n))throw new Error("toggleRefinement should be used with a value");return Ja.isRefined(e,t,n)?Ja.removeRefinement(e,t,n):Ja.addRefinement(e,t,n)},clearRefinement:function(e,i,a){if(fa(i))return ca(e)?e:{};if(la(i))return ca(e[i])?e:Vr(e,i);if(_e(i)){var o=!1,t=Ki(e,function(e,t,n){var r=qi(t,function(e){return!i(e,n,a)});return ca(r)?o=!0:(r.length!==t.length&&(o=!0),e[n]=r),e},{});return o?t:e}},isRefined:function(e,t,n){var r=ia,i=!!e[t]&&0<e[t].length;if(fa(n)||!i)return i;var a=""+n;return-1!==r(e[t],a)}},Ya=Ja;function Za(e){var t=e?Za._parseNumbers(e):{};this.index=t.index||"",this.query=t.query||"",this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{},this.numericFilters=t.numericFilters,this.tagFilters=t.tagFilters,this.optionalTagFilters=t.optionalTagFilters,this.optionalFacetFilters=t.optionalFacetFilters,this.hitsPerPage=t.hitsPerPage,this.maxValuesPerFacet=t.maxValuesPerFacet,this.page=t.page||0,this.queryType=t.queryType,this.typoTolerance=t.typoTolerance,this.minWordSizefor1Typo=t.minWordSizefor1Typo,this.minWordSizefor2Typos=t.minWordSizefor2Typos,this.minProximity=t.minProximity,this.allowTyposOnNumericTokens=t.allowTyposOnNumericTokens,this.ignorePlurals=t.ignorePlurals,this.restrictSearchableAttributes=t.restrictSearchableAttributes,this.advancedSyntax=t.advancedSyntax,this.analytics=t.analytics,this.analyticsTags=t.analyticsTags,this.synonyms=t.synonyms,this.replaceSynonymsInHighlight=t.replaceSynonymsInHighlight,this.optionalWords=t.optionalWords,this.removeWordsIfNoResults=t.removeWordsIfNoResults,this.attributesToRetrieve=t.attributesToRetrieve,this.attributesToHighlight=t.attributesToHighlight,this.highlightPreTag=t.highlightPreTag,this.highlightPostTag=t.highlightPostTag,this.attributesToSnippet=t.attributesToSnippet,this.getRankingInfo=t.getRankingInfo,this.distinct=t.distinct,this.aroundLatLng=t.aroundLatLng,this.aroundLatLngViaIP=t.aroundLatLngViaIP,this.aroundRadius=t.aroundRadius,this.minimumAroundRadius=t.minimumAroundRadius,this.aroundPrecision=t.aroundPrecision,this.insideBoundingBox=t.insideBoundingBox,this.insidePolygon=t.insidePolygon,this.snippetEllipsisText=t.snippetEllipsisText,this.disableExactOnAttributes=t.disableExactOnAttributes,this.enableExactOnSingleWordQuery=t.enableExactOnSingleWordQuery,this.offset=t.offset,this.length=t.length;var n=this;fi(t,function(e,t){-1===Za.PARAMETERS.indexOf(t)&&(n[t]=e)})}Za.PARAMETERS=Bt(new Za),Za._parseNumbers=function(r){if(r instanceof Za)return r;var i={};if(hi(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"],function(e){var t=r[e];if(la(t)){var n=parseFloat(t);i[e]=oa(n)?t:n}}),Array.isArray(r.insideBoundingBox)&&(i.insideBoundingBox=r.insideBoundingBox.map(function(e){return e.map(function(e){return parseFloat(e)})})),r.numericRefinements){var a={};hi(r.numericRefinements,function(e,r){a[r]={},hi(e,function(e,t){var n=Wi(e,function(e){return Array.isArray(e)?Wi(e,function(e){return la(e)?parseFloat(e):e}):la(e)?parseFloat(e):e});a[r][t]=n})}),i.numericRefinements=a}return $a({},r,i)},Za.make=function(e){var n=new Za(e);return hi(e.hierarchicalFacets,function(e){if(e.rootPath){var t=n.getHierarchicalRefinement(e.name);0<t.length&&0!==t[0].indexOf(e.rootPath)&&(n=n.clearRefinements(e.name)),0===(t=n.getHierarchicalRefinement(e.name)).length&&(n=n.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}}),n},Za.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&0<n.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&!ca(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):!ca(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},Za.prototype={constructor:Za,clearRefinements:function(e){var t=Ya.clearRefinement,n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:t(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:t(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:t(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:t(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=Ka(n);if(this.isNumericRefined(e,t,r))return this;var i=$a({},this.numericRefinements);return i[e]=$a({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(r)):i[e][t]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsExcludes[e]||[]},removeNumericRefinement:function(n,r,e){if(void 0===e)return void 0!==r?this.isNumericRefined(n,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r})}):this:this.isNumericRefined(n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n})}):this;var i=Ka(e);return this.isNumericRefined(n,r,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r&&ua(e.val,i)})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(a){if(fa(a))return ca(this.numericRefinements)?this.numericRefinements:{};if(la(a))return ca(this.numericRefinements[a])?this.numericRefinements:Vr(this.numericRefinements,a);if(_e(a)){var o=!1,e=Ki(this.numericRefinements,function(e,t,r){var i={};return hi(t,function(e,t){var n=[];hi(e,function(e){a({val:e,op:t},r,"numeric")||n.push(e)}),ca(n)?o=!0:(n.length!==e.length&&(o=!0),i[t]=n)}),ca(i)||(e[r]=i),e},{});return o?e:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ya.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:Ya.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ya.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:Ya.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Ya.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:Ya.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:qi(this.facets,function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:qi(this.disjunctiveFacets,function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:qi(this.hierarchicalFacets,function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ya.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:Ya.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ya.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:Ya.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Ya.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:Ya.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var e={tagRefinements:qi(this.tagRefinements,function(e){return e!==t})};return this.setQueryParameters(e)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:Ya.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:Ya.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:Ya.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ka({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ka({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))throw new Error(e+" is not refined.");var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ka({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<ia(this.disjunctiveFacets,e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<ia(this.facets,e)},isFacetRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ya.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ya.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Ya.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this.getHierarchicalRefinement(e);return t?-1!==ia(n,t):0<n.length},isNumericRefined:function(e,t,n){if(fa(n)&&fa(t))return!!this.numericRefinements[e];var r=this.numericRefinements[e]&&!fa(this.numericRefinements[e][t]);if(fa(n)||!r)return r;var i,a,o=Ka(n),s=!fa((i=this.numericRefinements[e][t],a=o,va(i,function(e){return ua(e,a)})));return r&&s},isTagRefined:function(e){return-1!==ia(this.tagRefinements,e)},getRefinedDisjunctiveFacets:function(){var e=oi(Bt(this.numericRefinements),this.disjunctiveFacets);return Bt(this.disjunctiveFacetsRefinements).concat(e).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){return oi(Wi(this.hierarchicalFacets,"name"),Bt(this.hierarchicalFacetsRefinements))},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return qi(this.disjunctiveFacets,function(e){return-1===ia(t,e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var n=this.managedParameters,r={};return fi(this,function(e,t){-1===ia(n,t)&&void 0!==e&&(r[t]=e)}),r},getQueryParameter:function(e){if(!this.hasOwnProperty(e))throw new Error("Parameter '"+e+"' is not an attribute of SearchParameters (http://algolia.github.io/algoliasearch-helper-js/docs/SearchParameters.html)");return this[e]},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(n){if(!n)return this;var e=Za.validate(this,n);if(e)throw e;var r=Za._parseNumbers(n);return this.mutateMe(function(t){var e=Bt(n);return hi(e,function(e){t[e]=r[e]}),t})},filter:function(e){return Ga(this,e)},mutateMe:function(e){var t=new this.constructor(this);return e(t,this),t},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return va(this.hierarchicalFacets,{name:e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))throw new Error("Cannot get the breadcrumb of an unknown hierarchical facet: `"+e+"`");var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r=t.split(n);return Wi(r,Qa)},toString:function(){return JSON.stringify(this,null,2)}};var Xa=Za;var eo=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i};var to=function(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n};var no=function(e,t){return e&&e.length?to(e,Ui(t,2)):0};var ro=function(t,e){return $(e,function(e){return t[e]})};var io=function(e){return null==e?[]:ro(e,Bt(e))},ao=Math.max;var oo=function(e,t,n,r){e=Lt(e)?e:io(e),n=n&&!r?na(n):0;var i=e.length;return n<0&&(n=ao(i+n,0)),la(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<Yr(e,t,n)};var so=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e};var co=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,a=tr(e),o=void 0!==t,s=null===t,c=t==t,u=tr(t);if(!s&&!u&&!a&&t<e||a&&o&&c&&!s&&!u||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!c)return-1}return 0};var uo=function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var c=co(i[r],a[r]);if(c)return s<=r?c:c*("desc"==n[r]?-1:1)}return e.index-t.index};var fo=function(e,r,n){var i=-1;r=$(r.length?r:[Mr],St(Ui));var t=Vi(e,function(t,e,n){return{criteria:$(r,function(e){return e(t)}),index:++i,value:t}});return so(t,function(e,t){return uo(e,t,n)})};var lo=function(e,t,n,r){return null==e?[]:(bt(t)||(t=null==t?[]:[t]),bt(n=r?void 0:n)||(n=null==n?[]:[n]),fo(e,t,n))},ho=hn&&new hn,po=ho?function(e,t){return ho.set(e,t),e}:Mr;var vo=function(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Mn(r.prototype),n=r.apply(t,e);return xe(n)?n:t}};var mo=function(t,e,n){var r=1&e,i=vo(t);return function e(){return(this&&this!==fe&&this instanceof e?i:t).apply(r?n:this,arguments)}},go=Math.max;var yo=function(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,c=t.length,u=go(a-o,0),f=Array(c+u),l=!r;++s<c;)f[s]=t[s];for(;++i<o;)(l||i<a)&&(f[n[i]]=e[i]);for(;u--;)f[s++]=e[i++];return f},bo=Math.max;var Ro=function(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,c=-1,u=t.length,f=bo(a-s,0),l=Array(f+u),h=!r;++i<f;)l[i]=e[i];for(var d=i;++c<u;)l[d+c]=t[c];for(;++o<s;)(h||i<a)&&(l[d+n[o]]=e[i++]);return l};var xo=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};var Fo=function(){};function _o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}var jo=(_o.prototype=Mn(Fo.prototype)).constructor=_o;var Po=ho?function(e){return ho.get(e)}:function(){},wo={},So=Object.prototype.hasOwnProperty;var Oo=function(e){for(var t=e.name+"",n=wo[t],r=So.call(wo,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t};function Ao(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var Eo=(Ao.prototype=Mn(Fo.prototype)).constructor=Ao;var To=function(e){if(e instanceof jo)return e.clone();var t=new Eo(e.__wrapped__,e.__chain__);return t.__actions__=Kt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},No=Object.prototype.hasOwnProperty;function Io(e){if(dt(e)&&!bt(e)&&!(e instanceof jo)){if(e instanceof Eo)return e;if(No.call(e,"__wrapped__"))return To(e)}return new Eo(e)}var Co=(Io.prototype=Fo.prototype).constructor=Io;var Ho=function(e){var t=Oo(e),n=Co[t];if("function"!=typeof n||!(t in jo.prototype))return!1;if(e===n)return!0;var r=Po(n);return!!r&&e===r[0]},Do=kr(po),Qo=/\{\n\/\* \[wrapped with (.+)\] \*/,Mo=/,? & /;var Lo=function(e){var t=e.match(Qo);return t?t[1].split(Mo):[]},Bo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var ko=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(Bo,"{\n/* [wrapped with "+t+"] */\n")},Uo=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var qo=function(n,r){return ot(Uo,function(e){var t="_."+e[0];r&e[1]&&!Zr(n,t)&&n.push(t)}),n.sort()};var Vo=function(e,t,n){var r=t+"";return Ur(e,ko(r,qo(Lo(r),n)))};var Wo=function(e,t,n,r,i,a,o,s,c,u){var f=8&t;t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4);var l=[e,t,i,f?a:void 0,f?o:void 0,f?void 0:a,f?void 0:o,s,c,u],h=n.apply(void 0,l);return Ho(e)&&Do(h,l),h.placeholder=r,Vo(h,e,t)};var zo=function(e){return e.placeholder},$o=Math.min;var Ko=function(e,t){for(var n=e.length,r=$o(t.length,n),i=Kt(e);r--;){var a=t[r];e[r]=_t(a,n)?i[a]:void 0}return e},Go="__lodash_placeholder__";var Jo=function(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==Go||(e[n]=Go,a[i++]=n)}return a},Yo=1,Zo=2,Xo=8,es=16,ts=128,ns=512;function rs(u,f,l,h,d,p,v,m,g,y){var b=f&ts,R=f&Yo,x=f&Zo,F=f&(Xo|es),_=f&ns,j=x?void 0:vo(u);return function e(){for(var t=arguments.length,n=Array(t),r=t;r--;)n[r]=arguments[r];if(F)var i=zo(e),a=xo(n,i);if(h&&(n=yo(n,h,d,F)),p&&(n=Ro(n,p,v,F)),t-=a,F&&t<y){var o=Jo(n,i);return Wo(u,f,rs,e.placeholder,l,n,o,m,g,y-t)}var s=R?l:this,c=x?s[u]:u;return t=n.length,m?n=Ko(n,m):_&&1<t&&n.reverse(),b&&g<t&&(n.length=g),this&&this!==fe&&this instanceof e&&(c=j||vo(c)),c.apply(s,n)}}var is=rs;var as=function(o,s,c){var u=vo(o);return function e(){for(var t=arguments.length,n=Array(t),r=t,i=zo(e);r--;)n[r]=arguments[r];var a=t<3&&n[0]!==i&&n[t-1]!==i?[]:Jo(n,i);return(t-=a.length)<c?Wo(o,s,is,e.placeholder,void 0,n,a,void 0,void 0,c-t):Cr(this&&this!==fe&&this instanceof e?u:o,this,n)}};var os=function(s,e,c,u){var f=1&e,l=vo(s);return function e(){for(var t=-1,n=arguments.length,r=-1,i=u.length,a=Array(i+n),o=this&&this!==fe&&this instanceof e?l:s;++r<i;)a[r]=u[r];for(;n--;)a[r++]=arguments[++t];return Cr(o,f?c:this,a)}},ss="__lodash_placeholder__",cs=Math.min;var us=function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var c=e[3];e[3]=c?yo(c,s,t[4]):s,e[4]=c?Jo(e[3],ss):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?Ro(c,s,t[6]):s,e[6]=c?Jo(e[5],ss):t[6]),(s=t[7])&&(e[7]=s),128&r&&(e[8]=null==e[8]?t[8]:cs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},fs=Math.max;var ls=function(e,t,n,r,i,a,o,s){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),o=void 0===o?o:fs(na(o),0),s=void 0===s?s:na(s),u-=i?i.length:0,64&t){var f=r,l=i;r=i=void 0}var h=c?void 0:Po(e),d=[e,t,n,r,i,f,l,a,o,s];if(h&&us(d,h),e=d[0],t=d[1],n=d[2],r=d[3],i=d[4],!(s=d[9]=void 0===d[9]?c?0:e.length:fs(d[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?as(e,t,s):32!=t&&33!=t||i.length?is.apply(void 0,d):os(e,t,n,r);else var p=mo(e,t,n);return Vo((h?po:Do)(p,d),e,t)},hs=ri(function(e,t){var n=Jo(t,zo(hs));return ls(e,32,void 0,t,n)});hs.placeholder={};var ds=hs,ps=ri(function(e,t){var n=Jo(t,zo(ps));return ls(e,64,void 0,t,n)});ps.placeholder={};var vs=ps;var ms=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=t<=e?e:t)),e};var gs=function(e,t,n){return e=vr(e),n=null==n?0:ms(na(n),0,e.length),t=pr(t),e.slice(n,n+t.length)==t},ys=function(e,i){return Ki(e,function(e,t){var n=t.split(":");if(i&&1===n.length){var r=va(i,function(e){return gs(e,t[0])});r&&(n=r.split(":"))}return e[0].push(n[0]),e[1].push(n[1]),e},[[],[]])};var bs=function(e,t,n,r){if(!xe(e))return e;for(var i=-1,a=(t=mr(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var c=yr(t[i]),u=n;if(i!=o){var f=s[c];void 0===(u=r?r(f,c,s):void 0)&&(u=xe(f)?f:_t(t[i+1])?[]:{})}ft(s,c,u),s=s[c]}return e};var Rs=function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=br(e,o);n(s,o)&&bs(a,mr(o,e),s)}return a};var xs=function(e,n){if(null==e)return{};var t=$(cn(e),function(e){return[e]});return n=Ui(n),Rs(e,t,function(e,t){return n(e,t[0])})},Fs=function(f){return function(e,t){var d,p,v,m,g,n=f.hierarchicalFacets[t],r=f.hierarchicalFacetsRefinements[n.name]&&f.hierarchicalFacetsRefinements[n.name][0]||"",i=f._getHierarchicalFacetSeparator(n),a=f._getHierarchicalRootPath(n),o=f._getHierarchicalShowParentLevel(n),s=ys(f._getHierarchicalFacetSortBy(n)),c=(d=s,p=i,v=a,m=o,g=r,function(e,t,n){var r,i,a,o,s,c,u,f=e;if(0<n){var l=0;for(f=e;l<n;)f=f&&va(f.data,{isRefined:!0}),l++}if(f){var h=(a=f.path||v,o=g,s=p,c=v,u=m,function(e,t){return(!c||0===t.indexOf(c)&&c!==t)&&(!c&&-1===t.indexOf(s)||c&&t.split(s).length-c.split(s).length==1||-1===t.indexOf(s)&&-1===o.indexOf(s)||0===o.indexOf(t)||0===t.indexOf(a+s)&&(u||0===t.indexOf(o)))});f.data=lo(Wi(xs(t.data,h),(r=p,i=g,function(e,t){return{name:Qa(gr(t.split(r))),path:t,count:e,isRefined:i===t||0===i.indexOf(t+r),data:null}})),d[0],d[1])}return e}),u=e;return a&&(u=e.slice(a.split(i).length)),Ki(u,c,{name:f.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,data:null})}};function _s(e){var n={};return hi(e,function(e,t){n[e]=t}),n}function js(e,t,n){t&&t[n]&&(e.stats=t[n])}function Ps(f,n){var l=n[0];this._rawResults=n,this.query=l.query,this.parsedQuery=l.parsedQuery,this.hits=l.hits,this.index=l.index,this.hitsPerPage=l.hitsPerPage,this.nbHits=l.nbHits,this.nbPages=l.nbPages,this.page=l.page,this.processingTimeMS=no(n,"processingTimeMS"),this.aroundLatLng=l.aroundLatLng,this.automaticRadius=l.automaticRadius,this.serverUsed=l.serverUsed,this.timeoutCounts=l.timeoutCounts,this.timeoutHits=l.timeoutHits,this.exhaustiveFacetsCount=l.exhaustiveFacetsCount,this.exhaustiveNbHits=l.exhaustiveNbHits,this.userData=l.userData,this.queryID=l.queryID,this.disjunctiveFacets=[],this.hierarchicalFacets=Wi(f.hierarchicalFacets,function(){return[]}),this.facets=[];var e=f.getRefinedDisjunctiveFacets(),h=_s(f.facets),d=_s(f.disjunctiveFacets),r=1,p=this;hi(l.facets,function(e,t){var n,r,i=(n=f.hierarchicalFacets,r=t,va(n,function(e){return oo(e.attributes,r)}));if(i){var a=i.attributes.indexOf(t),o=pa(f.hierarchicalFacets,{name:i.name});p.hierarchicalFacets[o][a]={attribute:t,data:e,exhaustive:l.exhaustiveFacetsCount}}else{var s,c=-1!==ia(f.disjunctiveFacets,t),u=-1!==ia(f.facets,t);c&&(s=d[t],p.disjunctiveFacets[s]={name:t,data:e,exhaustive:l.exhaustiveFacetsCount},js(p.disjunctiveFacets[s],l.facets_stats,t)),u&&(s=h[t],p.facets[s]={name:t,data:e,exhaustive:l.exhaustiveFacetsCount},js(p.facets[s],l.facets_stats,t))}}),this.hierarchicalFacets=eo(this.hierarchicalFacets),hi(e,function(e){var a=n[r],o=f.getHierarchicalFacetByName(e);hi(a.facets,function(e,t){var n;if(o){n=pa(f.hierarchicalFacets,{name:o.name});var r=pa(p.hierarchicalFacets[n],{attribute:t});if(-1===r)return;p.hierarchicalFacets[n][r].data=$a({},p.hierarchicalFacets[n][r].data,e)}else{n=d[t];var i=l.facets&&l.facets[t]||{};p.disjunctiveFacets[n]={name:t,data:ka({},e,i),exhaustive:a.exhaustiveFacetsCount},js(p.disjunctiveFacets[n],a.facets_stats,t),f.disjunctiveFacetsRefinements[t]&&hi(f.disjunctiveFacetsRefinements[t],function(e){!p.disjunctiveFacets[n].data[e]&&-1<ia(f.disjunctiveFacetsRefinements[t],e)&&(p.disjunctiveFacets[n].data[e]=0)})}}),r++}),hi(f.getRefinedHierarchicalFacets(),function(e){var o=f.getHierarchicalFacetByName(e),s=f._getHierarchicalFacetSeparator(o),c=f.getHierarchicalRefinement(e);if(!(0===c.length||c[0].split(s).length<2)){var t=n[r];hi(t.facets,function(e,t){var n=pa(f.hierarchicalFacets,{name:o.name}),r=pa(p.hierarchicalFacets[n],{attribute:t});if(-1!==r){var i={};if(0<c.length){var a=c[0].split(s)[0];i[a]=p.hierarchicalFacets[n][r].data[a]}p.hierarchicalFacets[n][r].data=ka(i,e,p.hierarchicalFacets[n][r].data)}}),r++}}),hi(f.facetsExcludes,function(e,t){var n=h[t];p.facets[n]={name:t,data:l.facets[t],exhaustive:l.exhaustiveFacetsCount},hi(e,function(e){p.facets[n]=p.facets[n]||{name:t},p.facets[n].data=p.facets[n].data||{},p.facets[n].data[e]=0})}),this.hierarchicalFacets=Wi(this.hierarchicalFacets,Fs(f)),this.facets=eo(this.facets),this.disjunctiveFacets=eo(this.disjunctiveFacets),this._state=f}function ws(e,t){if(!t.data||0===t.data.length)return t;var n=e(Wi(t.data,ds(ws,e)));return $a({},t,{data:n})}function Ss(e,t){return t.sort(e)}function Os(e,t){var n=va(e,{name:t});return n&&n.stats}function As(e,t,n,r,i){var a=va(i,{name:n});return{type:t,attributeName:n,name:r,count:Ci(a,"data["+r+"]")||0,exhaustive:Ci(a,"exhaustive")||!1}}Ps.prototype.getFacetByName=function(e){var t={name:e};return va(this.facets,t)||va(this.disjunctiveFacets,t)||va(this.hierarchicalFacets,t)},Ps.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],Ps.prototype.getFacetValues=function(e,t){var n=function(n,r){var e={name:r};if(n._state.isConjunctiveFacet(r)){var t=va(n.facets,e);return t?Wi(t.data,function(e,t){return{name:t,count:e,isRefined:n._state.isFacetRefined(r,t),isExcluded:n._state.isExcludeRefined(r,t)}}):[]}if(n._state.isDisjunctiveFacet(r)){var i=va(n.disjunctiveFacets,e);return i?Wi(i.data,function(e,t){return{name:t,count:e,isRefined:n._state.isDisjunctiveFacetRefined(r,t)}}):[]}if(n._state.isHierarchicalFacet(r))return va(n.hierarchicalFacets,e)}(this,e);if(!n)throw new Error(e+" is not a retrieved facet.");var r=ka({},t,{sortBy:Ps.DEFAULT_SORT});if(Array.isArray(r.sortBy)){var i=ys(r.sortBy,Ps.DEFAULT_SORT);return Array.isArray(n)?lo(n,i[0],i[1]):ws(vs(lo,i[0],i[1]),n)}if(_e(r.sortBy))return Array.isArray(n)?n.sort(r.sortBy):ws(ds(Ss,r.sortBy),n);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},Ps.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return Os(this.facets,e);if(this._state.isDisjunctiveFacet(e))return Os(this.disjunctiveFacets,e);throw new Error(e+" is not present in `facets` or `disjunctiveFacets`")},Ps.prototype.getRefinements=function(){var n=this._state,r=this,i=[];return hi(n.facetsRefinements,function(e,t){hi(e,function(e){i.push(As(n,"facet",t,e,r.facets))})}),hi(n.facetsExcludes,function(e,t){hi(e,function(e){i.push(As(n,"exclude",t,e,r.facets))})}),hi(n.disjunctiveFacetsRefinements,function(e,t){hi(e,function(e){i.push(As(n,"disjunctive",t,e,r.disjunctiveFacets))})}),hi(n.hierarchicalFacetsRefinements,function(e,t){hi(e,function(e){i.push(function(e,t,n,r){for(var i=va(r,{name:t}),a=e.getHierarchicalFacetByName(t),o=n.split(a.separator),s=o[o.length-1],c=0;void 0!==i&&c<o.length;++c)i=va(i.data,{name:o[c]});var u=Ci(i,"count"),f=Ci(i,"exhaustive");return{type:"hierarchical",attributeName:t,name:s,count:u||0,exhaustive:f||!1}}(n,t,e,r.hierarchicalFacets))})}),hi(n.numericRefinements,function(e,n){hi(e,function(e,t){hi(e,function(e){i.push({type:"numeric",attributeName:n,name:e,numericValue:e,operator:t})})})}),hi(n.tagRefinements,function(e){i.push({type:"tag",attributeName:"_tags",name:e})}),i};var Es=Ps,Ts=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},Ns=B(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Is=B(function(e,d){var s=/%[sdj%]/g;d.format=function(e){if(!x(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),o=r[n];n<i;o=r[++n])b(o)||!u(o)?a+=" "+o:a+=" "+c(o);return a},d.deprecate=function(e,t){if(F(L.process))return function(){return d.deprecate(e,t).apply(this,arguments)};var n=!1;return function(){return n||(console.error(t),n=!0),e.apply(this,arguments)}};var r,i={};function c(e,t){var n={seen:[],stylize:o};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),y(t)?n.showHidden=t:t&&d._extend(n,t),F(n.showHidden)&&(n.showHidden=!1),F(n.depth)&&(n.depth=2),F(n.colors)&&(n.colors=!1),F(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),p(n,e,n.depth)}function a(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function o(e,t){return e}function p(t,n,r){if(t.customInspect&&n&&w(n.inspect)&&n.inspect!==d.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return x(e)||(e=p(t,e,r)),e}var i=function(e,t){if(F(t))return e.stylize("undefined","undefined");if(x(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(R(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}(t,n);if(i)return i;var a,o=Object.keys(n),s=(a={},o.forEach(function(e,t){a[e]=!0}),a);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),P(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return v(n);if(0===o.length){if(w(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(_(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(j(n))return t.stylize(Date.prototype.toString.call(n),"date");if(P(n))return v(n)}var u,f="",l=!1,h=["{","}"];(g(n)&&(l=!0,h=["[","]"]),w(n))&&(f=" [Function"+(n.name?": "+n.name:"")+"]");return _(n)&&(f=" "+RegExp.prototype.toString.call(n)),j(n)&&(f=" "+Date.prototype.toUTCString.call(n)),P(n)&&(f=" "+v(n)),0!==o.length||l&&0!=n.length?r<0?_(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=l?function(t,n,r,i,e){for(var a=[],o=0,s=n.length;o<s;++o)S(n,String(o))?a.push(m(t,n,r,i,String(o),!0)):a.push("");return e.forEach(function(e){e.match(/^\d+$/)||a.push(m(t,n,r,i,e,!0))}),a}(t,n,r,s,o):o.map(function(e){return m(t,n,r,s,e,l)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,f,h)):h[0]+f+h[1]}function v(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,r,i,a){var o,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),S(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(c.value)<0?-1<(s=b(n)?p(e,c.value,null):p(e,c.value,n-1)).indexOf("\n")&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),F(o)){if(a&&i.match(/^\d+$/))return s;o=(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(o,"string"))}return o+": "+s}function g(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function b(e){return null===e}function R(e){return"number"==typeof e}function x(e){return"string"==typeof e}function F(e){return void 0===e}function _(e){return u(e)&&"[object RegExp]"===t(e)}function u(e){return"object"==typeof e&&null!==e}function j(e){return u(e)&&"[object Date]"===t(e)}function P(e){return u(e)&&("[object Error]"===t(e)||e instanceof Error)}function w(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}d.debuglog=function(t){if(F(r)&&(r=""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var n=M.pid;i[t]=function(){var e=d.format.apply(d,arguments);console.error("%s %d: %s",t,n,e)}}else i[t]=function(){};return i[t]},(d.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},d.isArray=g,d.isBoolean=y,d.isNull=b,d.isNullOrUndefined=function(e){return null==e},d.isNumber=R,d.isString=x,d.isSymbol=function(e){return"symbol"==typeof e},d.isUndefined=F,d.isRegExp=_,d.isObject=u,d.isDate=j,d.isError=P,d.isFunction=w,d.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},d.isBuffer=Ts;var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}d.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),f[e.getMonth()],t].join(" ")),d.format.apply(d,arguments))},d.inherits=Ns,d._extend=function(e,t){if(!t||!u(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}});Is.format,Is.deprecate,Is.debuglog,Is.inspect,Is.isArray,Is.isBoolean,Is.isNull,Is.isNullOrUndefined,Is.isNumber,Is.isString,Is.isSymbol,Is.isUndefined,Is.isRegExp,Is.isObject,Is.isDate,Is.isError,Is.isFunction,Is.isPrimitive,Is.isBuffer,Is.log,Is.inherits,Is._extend;function Cs(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Hs=Cs;function Ds(e){return"function"==typeof e}function Qs(e){return"object"==typeof e&&null!==e}function Ms(e){return void 0===e}function Ls(e,t){this.main=e,this.fn=t,this.lastResults=null}(Cs.EventEmitter=Cs).prototype._events=void 0,Cs.prototype._maxListeners=void 0,Cs.defaultMaxListeners=10,Cs.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},Cs.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||Qs(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(Ms(n=this._events[e]))return!1;if(Ds(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Qs(n))for(i=Array.prototype.slice.call(arguments,1),r=(o=n.slice()).length,a=0;a<r;a++)o[a].apply(this,i);return!0},Cs.prototype.on=Cs.prototype.addListener=function(e,t){var n;if(!Ds(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Ds(t.listener)?t.listener:t),this._events[e]?Qs(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Qs(this._events[e])&&!this._events[e].warned&&(n=Ms(this._maxListeners)?Cs.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},Cs.prototype.once=function(e,t){if(!Ds(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},Cs.prototype.removeListener=function(e,t){var n,r,i,a;if(!Ds(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||Ds(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Qs(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},Cs.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(Ds(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},Cs.prototype.listeners=function(e){return this._events&&this._events[e]?Ds(this._events[e])?[this._events[e]]:this._events[e].slice():[]},Cs.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Ds(t))return 1;if(t)return t.length}return 0},Cs.listenerCount=function(e,t){return e.listenerCount(t)},Is.inherits(Ls,Hs.EventEmitter),Ls.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},Ls.prototype.getModifiedState=function(e){return this.fn(e)};var Bs=Ls,ks={_getQueries:function(i,a){var o=[];return o.push({indexName:i,params:ks._getHitsSearchParams(a)}),hi(a.getRefinedDisjunctiveFacets(),function(e){o.push({indexName:i,params:ks._getDisjunctiveFacetSearchParams(a,e)})}),hi(a.getRefinedHierarchicalFacets(),function(e){var t=a.getHierarchicalFacetByName(e),n=a.getHierarchicalRefinement(e),r=a._getHierarchicalFacetSeparator(t);0<n.length&&1<n[0].split(r).length&&o.push({indexName:i,params:ks._getDisjunctiveFacetSearchParams(a,e,!0)})}),o},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(ks._getHitsHierarchicalFacetsAttributes(e)),n=ks._getFacetFilters(e),r=ks._getNumericFilters(e),i={facets:t,tagFilters:ks._getTagFilters(e)};return 0<n.length&&(i.facetFilters=n),0<r.length&&(i.numericFilters=r),$a(e.getQueryParams(),i)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=ks._getFacetFilters(e,t,n),i=ks._getNumericFilters(e,t),a={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:ks._getTagFilters(e),analytics:!1,clickAnalytics:!1},o=e.getHierarchicalFacetByName(t);return a.facets=o?ks._getDisjunctiveHierarchicalFacetAttribute(e,o,n):t,0<i.length&&(a.numericFilters=i),0<r.length&&(a.facetFilters=r),$a(e.getQueryParams(),a)},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var i=[];return hi(e.numericRefinements,function(e,r){hi(e,function(e,n){t!==r&&hi(e,function(e){if(Array.isArray(e)){var t=Wi(e,function(e){return r+n+e});i.push(t)}else i.push(r+n+e)})})}),i},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(c,u,f){var l=[];return hi(c.facetsRefinements,function(e,t){hi(e,function(e){l.push(t+":"+e)})}),hi(c.facetsExcludes,function(e,t){hi(e,function(e){l.push(t+":-"+e)})}),hi(c.disjunctiveFacetsRefinements,function(e,t){if(t!==u&&e&&0!==e.length){var n=[];hi(e,function(e){n.push(t+":"+e)}),l.push(n)}}),hi(c.hierarchicalFacetsRefinements,function(e,t){var n=e[0];if(void 0!==n){var r,i,a=c.getHierarchicalFacetByName(t),o=c._getHierarchicalFacetSeparator(a),s=c._getHierarchicalRootPath(a);if(u===t){if(-1===n.indexOf(o)||!s&&!0===f||s&&s.split(o).length===n.split(o).length)return;n=s?(i=s.split(o).length-1,s):(i=n.split(o).length-2,n.slice(0,n.lastIndexOf(o))),r=a.attributes[i]}else i=n.split(o).length-1,r=a.attributes[i];r&&l.push([r+":"+n])}}),l},_getHitsHierarchicalFacetsAttributes:function(o){return Ki(o.hierarchicalFacets,function(e,t){var n=o.getHierarchicalRefinement(t.name)[0];if(!n)return e.push(t.attributes[0]),e;var r=o._getHierarchicalFacetSeparator(t),i=n.split(r).length,a=t.attributes.slice(0,i+1);return e.concat(a)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var o=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,o+1)},getSearchForFacetQuery:function(e,t,n,r){var i=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,a={facetQuery:t,facetName:e};return"number"==typeof n&&(a.maxFacetHits=n),$a(ks._getHitsSearchParams(i),a)}},Us=ks;var qs=function(e,r,i,a){return ci(e,function(e,t,n){r(a,i(e),t,n)}),a};var Vs=function(n,r){return function(e,t){return qs(e,n,r(t),{})}},Ws=Object.prototype.toString,zs=Vs(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ws.call(t)),e[t]=n},Qr(Mr)),$s={advancedSyntax:"aS",allowTyposOnNumericTokens:"aTONT",analyticsTags:"aT",analytics:"a",aroundLatLngViaIP:"aLLVIP",aroundLatLng:"aLL",aroundPrecision:"aP",aroundRadius:"aR",attributesToHighlight:"aTH",attributesToRetrieve:"aTR",attributesToSnippet:"aTS",disjunctiveFacetsRefinements:"dFR",disjunctiveFacets:"dF",distinct:"d",facetsExcludes:"fE",facetsRefinements:"fR",facets:"f",getRankingInfo:"gRI",hierarchicalFacetsRefinements:"hFR",hierarchicalFacets:"hF",highlightPostTag:"hPoT",highlightPreTag:"hPrT",hitsPerPage:"hPP",ignorePlurals:"iP",index:"idx",insideBoundingBox:"iBB",insidePolygon:"iPg",length:"l",maxValuesPerFacet:"mVPF",minimumAroundRadius:"mAR",minProximity:"mP",minWordSizefor1Typo:"mWS1T",minWordSizefor2Typos:"mWS2T",numericFilters:"nF",numericRefinements:"nR",offset:"o",optionalWords:"oW",page:"p",queryType:"qT",query:"q",removeWordsIfNoResults:"rWINR",replaceSynonymsInHighlight:"rSIH",restrictSearchableAttributes:"rSA",synonyms:"s",tagFilters:"tF",tagRefinements:"tR",typoTolerance:"tT",optionalTagFilters:"oTF",optionalFacetFilters:"oFF",snippetEllipsisText:"sET",disableExactOnAttributes:"dEOA",enableExactOnSingleWordQuery:"eEOSWQ"},Ks=zs($s),Gs={ENCODED_PARAMETERS:Bt(Ks),decode:function(e){return Ks[e]},encode:function(e){return $s[e]}},Js=B(function(e,a){var o=Object.prototype.hasOwnProperty,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();a.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},a.merge=function(n,r,i){if(!r)return n;if("object"!=typeof r){if(Array.isArray(n))n.push(r);else{if("object"!=typeof n)return[n,r];(i.plainObjects||i.allowPrototypes||!o.call(Object.prototype,r))&&(n[r]=!0)}return n}if("object"!=typeof n)return[n].concat(r);var e=n;return Array.isArray(n)&&!Array.isArray(r)&&(e=a.arrayToObject(n,i)),Array.isArray(n)&&Array.isArray(r)?(r.forEach(function(e,t){o.call(n,t)?n[t]&&"object"==typeof n[t]?n[t]=a.merge(n[t],e,i):n.push(e):n[t]=e}),n):Object.keys(r).reduce(function(e,t){var n=r[t];return o.call(e,t)?e[t]=a.merge(e[t],n,i):e[t]=n,e},e)},a.assign=function(e,n){return Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},e)},a.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},a.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var i=t.charCodeAt(r);45===i||46===i||95===i||126===i||48<=i&&i<=57||65<=i&&i<=90||97<=i&&i<=122?n+=t.charAt(r):i<128?n+=s[i]:i<2048?n+=s[192|i>>6]+s[128|63&i]:i<55296||57344<=i?n+=s[224|i>>12]+s[128|i>>6&63]+s[128|63&i]:(r+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),n+=s[240|i>>18]+s[128|i>>12&63]+s[128|i>>6&63]+s[128|63&i])}return n},a.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],o=Object.keys(a),s=0;s<o.length;++s){var c=o[s],u=a[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:c}),n.push(u))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],i=0;i<t.length;++i)void 0!==t[i]&&r.push(t[i]);n.obj[n.prop]=r}}return t}(t)},a.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},a.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),Ys=(Js.arrayToObject,Js.merge,Js.assign,Js.decode,Js.encode,Js.compact,Js.isRegExp,Js.isBuffer,String.prototype.replace),Zs=/%20/g,Xs={default:"RFC3986",formatters:{RFC1738:function(e){return Ys.call(e,Zs,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},ec={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},tc=Date.prototype.toISOString,nc={delimiter:"&",encode:!0,encoder:Js.encode,encodeValuesOnly:!1,serializeDate:function(e){return tc.call(e)},skipNulls:!1,strictNullHandling:!1},rc=function e(t,n,r,i,a,o,s,c,u,f,l,h){var d=t;if("function"==typeof s)d=s(n,d);else if(d instanceof Date)d=f(d);else if(null===d){if(i)return o&&!h?o(n,nc.encoder):n;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||Js.isBuffer(d))return o?[l(h?n:o(n,nc.encoder))+"="+l(o(d,nc.encoder))]:[l(n)+"="+l(String(d))];var p,v=[];if(void 0===d)return v;if(Array.isArray(s))p=s;else{var m=Object.keys(d);p=c?m.sort(c):m}for(var g=0;g<p.length;++g){var y=p[g];a&&null===d[y]||(v=Array.isArray(d)?v.concat(e(d[y],r(n,y),r,i,a,o,s,c,u,f,l,h)):v.concat(e(d[y],n+(u?"."+y:"["+y+"]"),r,i,a,o,s,c,u,f,l,h)))}return v},ic=Object.prototype.hasOwnProperty,ac={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Js.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},oc=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),o=a?r.slice(0,a.index):r,s=[];if(o){if(!n.plainObjects&&ic.call(Object.prototype,o)&&!n.allowPrototypes)return;s.push(o)}for(var c=0;null!==(a=i.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&ic.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(a[1])}return a&&s.push("["+r.slice(a.index)+"]"),function(e,t,n){for(var r=t,i=e.length-1;0<=i;--i){var a,o=e[i];if("[]"===o)a=(a=[]).concat(r);else{a=n.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(s,10);!isNaN(c)&&o!==s&&String(c)===s&&0<=c&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=r:a[s]=r}r=a}return r}(s,t,n)}},sc=function(e,t){var n=t?Js.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||Js.isRegExp(n.delimiter)?n.delimiter:ac.delimiter,n.depth="number"==typeof n.depth?n.depth:ac.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:ac.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:ac.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:ac.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:ac.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:ac.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:ac.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:ac.strictNullHandling,""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,i),o=0;o<a.length;++o){var s,c,u=a[o],f=u.indexOf("]="),l=-1===f?u.indexOf("="):f+1;c=-1===l?(s=t.decoder(u,ac.decoder),t.strictNullHandling?null:""):(s=t.decoder(u.slice(0,l),ac.decoder),t.decoder(u.slice(l+1),ac.decoder)),ic.call(n,s)?n[s]=[].concat(n[s]).concat(c):n[s]=c}return n}(e,n):e,i=n.plainObjects?Object.create(null):{},a=Object.keys(r),o=0;o<a.length;++o){var s=a[o],c=oc(s,r[s],n);i=Js.merge(i,c,n)}return Js.compact(i)},cc=function(e,t){var n=e,r=t?Js.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var i=void 0===r.delimiter?nc.delimiter:r.delimiter,a="boolean"==typeof r.strictNullHandling?r.strictNullHandling:nc.strictNullHandling,o="boolean"==typeof r.skipNulls?r.skipNulls:nc.skipNulls,s="boolean"==typeof r.encode?r.encode:nc.encode,c="function"==typeof r.encoder?r.encoder:nc.encoder,u="function"==typeof r.sort?r.sort:null,f=void 0!==r.allowDots&&r.allowDots,l="function"==typeof r.serializeDate?r.serializeDate:nc.serializeDate,h="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:nc.encodeValuesOnly;if(void 0===r.format)r.format=Xs.default;else if(!Object.prototype.hasOwnProperty.call(Xs.formatters,r.format))throw new TypeError("Unknown format option provided.");var d,p,v=Xs.formatters[r.format];"function"==typeof r.filter?n=(p=r.filter)("",n):Array.isArray(r.filter)&&(d=p=r.filter);var m,g=[];if("object"!=typeof n||null===n)return"";m=r.arrayFormat in ec?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var y=ec[m];d||(d=Object.keys(n)),u&&d.sort(u);for(var b=0;b<d.length;++b){var R=d[b];o&&null===n[R]||(g=g.concat(rc(n[R],R,y,a,o,s?c:null,p,u,f,l,v,h)))}var x=g.join(i),F=!0===r.addQueryPrefix?"?":"";return 0<x.length?F+x:""},uc=ri(function(e,t,n){var r=1;if(n.length){var i=Jo(n,zo(uc));r|=32}return ls(e,r,t,n,i)});uc.placeholder={};var fc=uc;var lc=function(n,e){return Rs(n,e,function(e,t){return Qi(n,t)})},hc=qr(function(e,t){return null==e?{}:lc(e,t)});var dc=function(e,r){var i={};return r=Ui(r,3),ci(e,function(e,t,n){ct(i,r(e,t,n),e)}),i};var pc=function(e,r){var i={};return r=Ui(r,3),ci(e,function(e,t,n){ct(i,t,r(e,t,n))}),i},vc=Js.encode;function mc(e){return Or(e)?pc(e,mc):Array.isArray(e)?Wi(e,mc):la(e)?vc(e):e}var gc=["dFR","fR","nR","hFR","tR"],yc=Gs.ENCODED_PARAMETERS;function bc(e,t,n,r){if(null!==e&&(n=n.replace(e,""),r=r.replace(e,"")),n=t[n]||n,r=t[r]||r,-1!==yc.indexOf(n)||-1!==yc.indexOf(r)){if("q"===n)return-1;if("q"===r)return 1;var i=-1!==gc.indexOf(n),a=-1!==gc.indexOf(r);if(i&&!a)return 1;if(a&&!i)return-1}return n.localeCompare(r)}var Rc={getStateFromQueryString:function(e,t){var r=t&&t.prefix||"",n=t&&t.mapping||{},i=zs(n),a=sc(e),o=new RegExp("^"+r),s=dc(a,function(e,t){var n=r&&o.test(t)?t.replace(o,""):t;return Gs.decode(i[n]||n)||n}),c=Xa._parseNumbers(s);return hc(c,Xa.PARAMETERS)},getUnrecognizedParametersInQueryString:function(e,t){var n=t&&t.prefix,r=t&&t.mapping||{},i=zs(r),a={},o=sc(e);if(n){var s=new RegExp("^"+n);hi(o,function(e,t){s.test(t)||(a[t]=e)})}else hi(o,function(e,t){Gs.decode(i[t]||t)||(a[t]=e)});return a},getQueryStringFromState:function(e,t){var n=t&&t.moreAttributes,r=t&&t.prefix||"",i=t&&t.mapping||{},a=t&&t.safe||!1,o=zs(i),s=a?e:mc(e),c=dc(s,function(e,t){var n=Gs.encode(t);return r+(i[n]||n)}),u=""===r?null:new RegExp("^"+r),f=fc(bc,null,u,o);if(ca(n))return cc(c,{encode:a,sort:f});var l=cc(c,{encode:a,sort:f}),h=cc(n,{encode:a});return l?l+"&"+h:h}},xc="2.26.0";function Fc(e,t,n){e.addAlgoliaAgent&&!Pc(e)&&e.addAlgoliaAgent("JS Helper "+xc),this.setClient(e);var r=n||{};r.index=t,this.state=Xa.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function _c(e){if(e<0)throw new Error("Page requested below 0.");return this._change(this.state.setPage(e)),this}function jc(){return this.state.page}function Pc(e){var t=e._ua;return!!t&&-1!==t.indexOf("JS Helper")}Is.inherits(Fc,Hs.EventEmitter),Fc.prototype.search=function(){return this._search(),this},Fc.prototype.getQuery=function(){var e=this.state;return Us._getHitsSearchParams(e)},Fc.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=Us._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",n),!t)return this.client.search(r).then(function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new Es(n,e.results),state:n,_originalResponse:e}},function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e});this.client.search(r).then(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new Es(n,e.results),n)}).catch(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)})},Fc.prototype.searchForFacetValues=function(t,e,n,r){var i=this.state.setQueryParameters(r||{}),a=i.isDisjunctiveFacet(t),o=Us.getSearchForFacetQuery(t,e,n,i);this._currentNbQueries++;var s=this;return this.emit("searchForFacetValues",i,t,e),("function"==typeof this.client.searchForFacetValues?this.client.searchForFacetValues([{indexName:i.index,params:o}]):this.client.initIndex(i.index).searchForFacetValues(o)).then(function(e){return s._currentNbQueries--,0===s._currentNbQueries&&s.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits=hi(e.facetHits,function(e){e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.value):i.isFacetRefined(t,e.value)}),e},function(e){throw s._currentNbQueries--,0===s._currentNbQueries&&s.emit("searchQueueEmpty"),e})},Fc.prototype.setQuery=function(e){return this._change(this.state.setPage(0).setQuery(e)),this},Fc.prototype.clearRefinements=function(e){return this._change(this.state.setPage(0).clearRefinements(e)),this},Fc.prototype.clearTags=function(){return this._change(this.state.setPage(0).clearTags()),this},Fc.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addDisjunctiveFacetRefinement(e,t)),this},Fc.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},Fc.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addHierarchicalFacetRefinement(e,t)),this},Fc.prototype.addNumericRefinement=function(e,t,n){return this._change(this.state.setPage(0).addNumericRefinement(e,t,n)),this},Fc.prototype.addFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addFacetRefinement(e,t)),this},Fc.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},Fc.prototype.addFacetExclusion=function(e,t){return this._change(this.state.setPage(0).addExcludeRefinement(e,t)),this},Fc.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},Fc.prototype.addTag=function(e){return this._change(this.state.setPage(0).addTagRefinement(e)),this},Fc.prototype.removeNumericRefinement=function(e,t,n){return this._change(this.state.setPage(0).removeNumericRefinement(e,t,n)),this},Fc.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeDisjunctiveFacetRefinement(e,t)),this},Fc.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},Fc.prototype.removeHierarchicalFacetRefinement=function(e){return this._change(this.state.setPage(0).removeHierarchicalFacetRefinement(e)),this},Fc.prototype.removeFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeFacetRefinement(e,t)),this},Fc.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},Fc.prototype.removeFacetExclusion=function(e,t){return this._change(this.state.setPage(0).removeExcludeRefinement(e,t)),this},Fc.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},Fc.prototype.removeTag=function(e){return this._change(this.state.setPage(0).removeTagRefinement(e)),this},Fc.prototype.toggleFacetExclusion=function(e,t){return this._change(this.state.setPage(0).toggleExcludeFacetRefinement(e,t)),this},Fc.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},Fc.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},Fc.prototype.toggleFacetRefinement=function(e,t){return this._change(this.state.setPage(0).toggleFacetRefinement(e,t)),this},Fc.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},Fc.prototype.toggleTag=function(e){return this._change(this.state.setPage(0).toggleTagRefinement(e)),this},Fc.prototype.nextPage=function(){return this.setPage(this.state.page+1)},Fc.prototype.previousPage=function(){return this.setPage(this.state.page-1)},Fc.prototype.setCurrentPage=_c,Fc.prototype.setPage=_c,Fc.prototype.setIndex=function(e){return this._change(this.state.setPage(0).setIndex(e)),this},Fc.prototype.setQueryParameter=function(e,t){return this._change(this.state.setPage(0).setQueryParameter(e,t)),this},Fc.prototype.setState=function(e){return this._change(Xa.make(e)),this},Fc.prototype.getState=function(e){return void 0===e?this.state:this.state.filter(e)},Fc.prototype.getStateAsQueryString=function(e){var t=e&&e.filters||["query","attribute:*"],n=this.getState(t);return Rc.getQueryStringFromState(n,e)},Fc.getConfigurationFromQueryString=Rc.getStateFromQueryString,Fc.getForeignConfigurationInQueryString=Rc.getUnrecognizedParametersInQueryString,Fc.prototype.setStateFromQueryString=function(e,t){var n=t&&t.triggerChange||!1,r=Rc.getStateFromQueryString(e,t),i=this.state.setQueryParameters(r);n?this.setState(i):this.overrideStateWithoutTriggeringChangeEvent(i)},Fc.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new Xa(e),this},Fc.prototype.isRefined=function(e,t){if(this.state.isConjunctiveFacet(e))return this.state.isFacetRefined(e,t);if(this.state.isDisjunctiveFacet(e))return this.state.isDisjunctiveFacetRefined(e,t);throw new Error(e+" is not properly defined in this helper configuration(use the facets or disjunctiveFacets keys to configure it)")},Fc.prototype.hasRefinements=function(e){return!ca(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},Fc.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},Fc.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},Fc.prototype.hasTag=function(e){return this.state.isTagRefined(e)},Fc.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},Fc.prototype.getIndex=function(){return this.state.index},Fc.prototype.getCurrentPage=jc,Fc.prototype.getPage=jc,Fc.prototype.getTags=function(){return this.state.tagRefinements},Fc.prototype.getQueryParameter=function(e){return this.state.getQueryParameter(e)},Fc.prototype.getRefinements=function(e){var n=[];if(this.state.isConjunctiveFacet(e)){var t=this.state.getConjunctiveRefinements(e);hi(t,function(e){n.push({value:e,type:"conjunctive"})});var r=this.state.getExcludeRefinements(e);hi(r,function(e){n.push({value:e,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);hi(i,function(e){n.push({value:e,type:"disjunctive"})})}var a=this.state.getNumericRefinements(e);return hi(a,function(e,t){n.push({value:e,operator:t,type:"numeric"})}),n},Fc.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},Fc.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},Fc.prototype._search=function(){var r=this.state,e=Us._getQueries(r.index,r),i=[{state:r,queriesCount:e.length,helper:this}];this.emit("search",r,this.lastResults);var t=Wi(this.derivedHelpers,function(e){var t=e.getModifiedState(r),n=Us._getQueries(t.index,t);return i.push({state:t,queriesCount:n.length,helper:e}),e.emit("search",t,e.lastResults),n}),n=e.concat(Ir(t)),a=this._queryId++;this._currentNbQueries++;try{this.client.search(n).then(this._dispatchAlgoliaResponse.bind(this,i,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(e){this.emit("error",e)}},Fc.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var o=n.results;hi(e,function(e){var t=e.state,n=e.queriesCount,r=e.helper,i=o.splice(0,n),a=r.lastResults=new Es(t,i);r.emit("result",a,t)})}},Fc.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",t),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},Fc.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},Fc.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},Fc.prototype._change=function(e){e!==this.state&&(this.state=e,this.emit("change",this.state,this.lastResults))},Fc.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},Fc.prototype.setClient=function(e){return this.client===e||(e.addAlgoliaAgent&&!Pc(e)&&e.addAlgoliaAgent("JS Helper "+xc),this.client=e),this},Fc.prototype.getClient=function(){return this.client},Fc.prototype.derive=function(e){var t=new Bs(this,e);return this.derivedHelpers.push(t),t},Fc.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},Fc.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var wc=Fc;function Sc(e,t,n){return new wc(e,t,n)}Sc.version=xc,Sc.AlgoliaSearchHelper=wc,Sc.SearchParameters=Xa,Sc.SearchResults=Es,Sc.url=Rc;var Oc=Sc,Ac=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,a=0;a<n.length;a++)if(!i.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;return!0},Ec=Promise.resolve(),Tc=function(e){Ec.then(e)};function Nc(e,n,r){return e.map(function(e,t){return z({},e,{__position:n*r+t+1})})}function Ic(e,t){return t?e.map(function(e){return z({},e,{__queryID:t})}):e}function Cc(e){var t=e,n=[];return{getState:function(){return t},setState:function(e){t=e,n.forEach(function(e){return e()})},subscribe:function(e){return n.push(e),function(){n.splice(n.indexOf(e),1)}}}}var Hc={highlightPreTag:"<ais-highlight-0000000000>",highlightPostTag:"</ais-highlight-0000000000>"};function Dc(e){var t=e.preTag,n=e.postTag,r=e.highlightedValue,i=(void 0===r?"":r).split(t),a=i.shift(),o=""===a?[]:[{value:a,isHighlighted:!1}];if(n===t){var s=!0;i.forEach(function(e){o.push({value:e,isHighlighted:s}),s=!s})}else i.forEach(function(e){var t=e.split(n);o.push({value:t[0],isHighlighted:!0}),""!==t[1]&&o.push({value:t[1],isHighlighted:!1})});return o}function Qc(e){return e&&e.multiIndexContext?e.multiIndexContext.targetedIndex:e.ais.mainTargetedIndex}function Mc(e,t){return e.results&&!e.results.hits?e.results[Qc(t)]?e.results[Qc(t)]:null:e.results?e.results:null}function Lc(e){return e&&e.multiIndexContext}function Bc(t,e,n,r,i){if(Lc(n)){var a=Qc(n);return i?(m=e,g=a,y=i,R=r?{page:1}:void 0,x=(v=t).indices&&v.indices[g]?z({},v.indices,F({},g,z({},v.indices[g],(F(b={},y,z({},v.indices[g][y],m)),F(b,"page",1),b)))):z({},v.indices,F({},g,z(F({},y,m),R))),z({},v,{indices:x})):(l=e,h=a,d=r?{page:1}:void 0,p=(f=t).indices&&f.indices[h]?z({},f.indices,F({},h,z({},f.indices[h],l,d))):z({},f.indices,F({},h,z({},l,d))),z({},f,{indices:p}))}return t.indices&&r&&Object.keys(t.indices).forEach(function(e){t=Bc(t,{page:1},{multiIndexContext:{targetedIndex:e}},!0,i)}),i?(s=e,u=r?{page:1}:void 0,z({},o=t,F({},c=i,z({},o[c],s)),u)):z({},t,e,r?{page:1}:void 0);var o,s,c,u,f,l,h,d,p,v,m,g,y,b,R,x}function kc(e){var t=e.match(/^([^.]*)\.(.*)/);return{namespace:t&&t[1],attributeName:t&&t[2]}}function Uc(e,t,n,r,i){var a,o,s,c,u,f,l,h,d,p,v,m,g,y,b=Qc(n),R=kc(r),x=R.namespace,F=R.attributeName,_={multiIndex:Lc(n),indexId:b,namespace:x,attributeName:F,id:r,searchState:t};return(o=(a=_).multiIndex,s=a.indexId,c=a.namespace,u=a.attributeName,f=a.id,l=a.searchState,o&&c?l.indices&&l.indices[s]&&l.indices[s][c]&&l.indices[s][c].hasOwnProperty(u):o?l.indices&&l.indices[s]&&l.indices[s].hasOwnProperty(f):c?l[c]&&l[c].hasOwnProperty(u):l.hasOwnProperty(f))?(d=(h=_).multiIndex,p=h.indexId,v=h.namespace,m=h.attributeName,g=h.id,y=h.searchState,d&&v?y.indices[p][v][m]:d?y.indices[p][g]:v?y[v][m]:y[g]):e.defaultRefinement?e.defaultRefinement:i}function qc(e,t,n){var r=Qc(t),i=kc(n),a=i.namespace,o=i.attributeName;return Lc(t)&&Boolean(e.indices)?function(e){var t=e.searchState,n=e.indexId,r=e.id,i=e.namespace,a=e.attribute,o=t.indices[n];if(i&&o)return z({},t,{indices:z({},t.indices,F({},n,z({},o,F({},i,Vr(o[i],a)))))});return Vr(t,"indices.".concat(n,".").concat(r))}({attribute:o,searchState:e,indexId:r,id:n,namespace:a}):function(e){var t=e.searchState,n=e.id,r=e.namespace,i=e.attribute;if(r)return z({},t,F({},r,Vr(t[r],i)));return Vr(t,n)}({attribute:o,searchState:e,id:n,namespace:a})}var Vc=function(e){return Lc(e.context)},Wc=function(e,t){return e.context.multiIndexContext.targetedIndex===t},zc=function(e){return Boolean(e.props.indexId)},$c=function(e,t){return e.props.indexId===t};function Kc(e){var r=e.indexName,t=e.initialState,n=void 0===t?{}:t,i=e.searchClient,a=e.resultsState,o=e.stalledSearchDelay,c=Oc(i,r,z({},Hc));c.on("search",function(){u||(u=setTimeout(function(){var e=Vr(z({},h.getState(),{isSearchStalled:!0}),"resultsFacetValues");h.setState(e)},o))}).on("result",m({indexId:r})).on("error",g);var s=!1,u=null,f=c.state,l=function(e){var t=[],n=!1;function r(){n||(n=!0,Tc(function(){n=!1,e()}))}return{registerWidget:function(e){return t.push(e),r(),function(){t.splice(t.indexOf(e),1),r()}},update:r,getWidgets:function(){return t}}}(function(){var e=d(h.getState().widgets);h.setState(z({},h.getState(),{metadata:e,searching:!0})),v()}),h=Cc({widgets:n,metadata:[],results:a||null,error:null,searching:!1,isSearchStalled:!0,searchingForFacetValues:!1});function d(t){return l.getWidgets().filter(function(e){return Boolean(e.getMetadata)}).map(function(e){return e.getMetadata(t)})}function p(){var t=l.getWidgets().filter(function(e){return Boolean(e.getSearchParameters)}).filter(function(e){return!Vc(e)&&!zc(e)}).reduce(function(e,t){return t.getSearchParameters(e)},f),e=l.getWidgets().filter(function(e){return Boolean(e.getSearchParameters)}).filter(function(e){var t=Vc(e)&&Wc(e,r),n=zc(e)&&$c(e,r);return t||n}).reduce(function(e,t){return t.getSearchParameters(e)},t),n=l.getWidgets().filter(function(e){return Boolean(e.getSearchParameters)}).filter(function(e){var t=Vc(e)&&!Wc(e,r),n=zc(e)&&!$c(e,r);return t||n}).reduce(function(e,t){var n=Vc(t)?t.context.multiIndexContext.targetedIndex:t.props.indexId;return z({},e,F({},n,(e[n]||[]).concat(t)))},{});return{mainParameters:e,derivedParameters:Object.keys(n).map(function(e){return{parameters:n[e].reduce(function(e,t){return t.getSearchParameters(e)},t),indexId:e}})}}function v(){if(!s){var e=p(c.state),t=e.mainParameters,n=e.derivedParameters;c.derivedHelpers.slice().forEach(function(e){e.detach()}),n.forEach(function(e){var t=e.indexId,n=e.parameters;c.derive(function(){return n}).on("result",m({indexId:t})).on("error",g)}),c.setState(t),c.search()}}function m(e){var s=e.indexId;return function(e){var t=h.getState(),n=!c.derivedHelpers.length,r=t.results?t.results:{};r=!n&&r.getFacetByName?{}:r,n?r=e:r[s]=e;var i=h.getState(),a=i.isSearchStalled;c.hasPendingRequests()||(clearTimeout(u),u=null,a=!1);var o=Vr(z({},i,{results:r,isSearchStalled:a,searching:!1,error:null}),"resultsFacetValues");h.setState(o)}}function g(e){var t=h.getState(),n=t.isSearchStalled;c.hasPendingRequests()||(clearTimeout(u),n=!1);var r=Vr(z({},t,{isSearchStalled:n,error:e,searching:!1}),"resultsFacetValues");h.setState(r)}return{store:h,widgetsManager:l,getWidgetsIds:function(){return h.getState().metadata.reduce(function(e,t){return void 0!==t.id?e.concat(t.id):e},[])},getSearchParameters:p,onSearchForFacetValues:function(e){var n=e.facetName,r=e.query,t=e.maxFacetHits,i=void 0===t?10:t,a=Math.max(1,Math.min(i,100));h.setState(z({},h.getState(),{searchingForFacetValues:!0})),c.searchForFacetValues(n,r,a).then(function(e){var t;h.setState(z({},h.getState(),{error:null,searchingForFacetValues:!1,resultsFacetValues:z({},h.getState().resultsFacetValues,(t={},F(t,n,e.facetHits),F(t,"query",r),t))}))},function(e){h.setState(z({},h.getState(),{searchingForFacetValues:!1,error:e}))}).catch(function(e){setTimeout(function(){throw e})})},onExternalStateUpdate:function(e){var t=d(e);h.setState(z({},h.getState(),{widgets:e,metadata:t,searching:!0})),v()},transitionState:function(e){var n=h.getState().widgets;return l.getWidgets().filter(function(e){return Boolean(e.transitionState)}).reduce(function(e,t){return t.transitionState(n,e)},e)},updateClient:function(e){c.setClient(e),v()},updateIndex:function(e){f=f.setIndex(e),v()},clearCache:function(){c.clearCache(),v()},skipSearch:function(){s=!0}}}var Gc=function(e){function r(e){var t;m(this,r),(t=b(this,R(r).call(this,e))).isControlled=Boolean(e.searchState);var n=t.isControlled?e.searchState:{};return t.isUnmounting=!1,t.aisManager=Kc({indexName:e.indexName,searchClient:e.searchClient,initialState:n,resultsState:e.resultsState,stalledSearchDelay:e.stalledSearchDelay}),t}return x(r,p.Component),g(r,[{key:"componentWillReceiveProps",value:function(e){!function(e,t){if(!e.searchState&&t.searchState)throw new Error("You can't switch <InstantSearch> from being uncontrolled to controlled");if(e.searchState&&!t.searchState)throw new Error("You can't switch <InstantSearch> from being controlled to uncontrolled")}(this.props,e),this.props.indexName!==e.indexName&&this.aisManager.updateIndex(e.indexName),this.props.refresh!==e.refresh&&e.refresh&&this.aisManager.clearCache(),this.props.searchClient!==e.searchClient&&this.aisManager.updateClient(e.searchClient),this.isControlled&&this.aisManager.onExternalStateUpdate(e.searchState)}},{key:"componentWillUnmount",value:function(){this.isUnmounting=!0,this.aisManager.skipSearch()}},{key:"getChildContext",value:function(){return this._aisContextCache||(this._aisContextCache={ais:{onInternalStateUpdate:this.onWidgetsInternalStateUpdate.bind(this),createHrefForState:this.createHrefForState.bind(this),onSearchForFacetValues:this.onSearchForFacetValues.bind(this),onSearchStateChange:this.onSearchStateChange.bind(this),onSearchParameters:this.onSearchParameters.bind(this)}}),{ais:z({},this._aisContextCache.ais,{store:this.aisManager.store,widgetsManager:this.aisManager.widgetsManager,mainTargetedIndex:this.props.indexName})}}},{key:"createHrefForState",value:function(e){return e=this.aisManager.transitionState(e),this.isControlled&&this.props.createURL?this.props.createURL(e,this.getKnownKeys()):"#"}},{key:"onWidgetsInternalStateUpdate",value:function(e){e=this.aisManager.transitionState(e),this.onSearchStateChange(e),this.isControlled||this.aisManager.onExternalStateUpdate(e)}},{key:"onSearchStateChange",value:function(e){this.props.onSearchStateChange&&!this.isUnmounting&&this.props.onSearchStateChange(e)}},{key:"onSearchParameters",value:function(e,t,n){if(this.props.onSearchParameters){var r=this.props.searchState?this.props.searchState:{};this.props.onSearchParameters(e,t,n,r)}}},{key:"onSearchForFacetValues",value:function(e){this.aisManager.onSearchForFacetValues(e)}},{key:"getKnownKeys",value:function(){return this.aisManager.getWidgetsIds()}},{key:"render",value:function(){var e=p.Children.count(this.props.children),t=this.props.root,n=t.Root,r=t.props;return 0===e?null:v.createElement(n,r,this.props.children)}}]),r}();Gc.defaultProps={stalledSearchDelay:200},Gc.childContextTypes={ais:W.object.isRequired};var Jc="5.7.0";var Yc=function(e){function a(){var e,t;m(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=b(this,(e=R(a)).call.apply(e,[this].concat(r)))).unregisterWidget=t.context.ais.widgetsManager.registerWidget(y(t)),t}return x(a,p.Component),g(a,[{key:"componentWillMount",value:function(){this.context.ais.onSearchParameters(this.getSearchParameters.bind(this),this.getChildContext(),this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.indexName!==e.indexName&&this.context.ais.widgetsManager.update()}},{key:"componentWillUnmount",value:function(){this.unregisterWidget()}},{key:"getChildContext",value:function(){return{multiIndexContext:{targetedIndex:this.props.indexId}}}},{key:"getSearchParameters",value:function(e,t){return e.setIndex(this.props?this.props.indexName:t.indexName)}},{key:"render",value:function(){var e=p.Children.count(this.props.children),t=this.props.root,n=t.Root,r=t.props;return 0===e?null:v.createElement(n,r,this.props.children)}}]),a}();Yc.childContextTypes={multiIndexContext:W.object.isRequired},Yc.contextTypes={ais:W.object.isRequired};function Zc(){return(Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Xc=Object.prototype.hasOwnProperty;var eu=function(e,t){return null!=e&&Xc.call(e,t)};var tu=function(e,t){return null!=e&&Di(e,t,eu)};function nu(f){if(!f.displayName)throw new Error("`createConnector` requires you to provide a `displayName` property.");var i=tu(f,"refine"),o=tu(f,"searchForFacetValues"),s=tu(f,"getSearchParameters"),c=tu(f,"getMetadata"),u=tu(f,"transitionState"),l=tu(f,"cleanUp"),h=tu(f,"shouldComponentUpdate"),d=s||c||u;return function(n){var e,t,r;return t=e=function(e){function a(){var e,i;m(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F(y(i=b(this,(e=R(a)).call.apply(e,[this].concat(n)))),"mounted",!1),F(y(i),"unmounting",!1),F(y(i),"refine",function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i.context.ais.onInternalStateUpdate((e=f.refine).call.apply(e,[y(i),i.props,i.context.ais.store.getState().widgets].concat(n)))}),F(y(i),"createURL",function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.context.ais.createHrefForState((e=f.refine).call.apply(e,[y(i),i.props,i.context.ais.store.getState().widgets].concat(n)))}),F(y(i),"searchForFacetValues",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.context.ais.onSearchForFacetValues(f.searchForFacetValues.apply(f,[i.props,i.context.ais.store.getState().widgets].concat(t)))}),i.state={props:i.getProvidedProps(z({},i.props,{canRender:!1}))},i}return x(a,p.Component),g(a,[{key:"componentWillMount",value:function(){f.getSearchParameters&&this.context.ais.onSearchParameters(f.getSearchParameters.bind(this),this.context,this.props)}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.unsubscribe=this.context.ais.store.subscribe(function(){e.unmounting||e.setState({props:e.getProvidedProps(z({},e.props,{canRender:!0}))})}),d&&(this.unregisterWidget=this.context.ais.widgetsManager.registerWidget(this))}},{key:"componentWillReceiveProps",value:function(e){ua(this.props,e)||(this.setState({props:this.getProvidedProps(z({},e,{canRender:this.mounted}))}),d&&(this.context.ais.widgetsManager.update(),f.transitionState&&this.context.ais.onSearchStateChange(f.transitionState.call(this,e,this.context.ais.store.getState().widgets,this.context.ais.store.getState().widgets))))}},{key:"shouldComponentUpdate",value:function(e,t){if(h)return f.shouldComponentUpdate.call(this,this.props,e,this.state,t);var n=Ac(this.props,e);return null===this.state.props||null===t.props?this.state.props!==t.props||!n:!n||!Ac(this.state.props,t.props)}},{key:"componentWillUnmount",value:function(){if(this.unmounting=!0,this.unsubscribe&&this.unsubscribe(),this.unregisterWidget&&(this.unregisterWidget(),l)){var e=f.cleanUp.call(this,this.props,this.context.ais.store.getState().widgets);this.context.ais.store.setState(z({},this.context.ais.store.getState(),{widgets:e})),this.context.ais.onSearchStateChange(function n(r){return Object.keys(r).forEach(function(e){var t=r[e];ca(t)&&Or(t)?delete r[e]:Or(t)&&n(t)}),r}(e))}}},{key:"getProvidedProps",value:function(e){var t=this.context.ais.store.getState(),n=t.widgets,r=t.results,i=t.resultsFacetValues,a=t.searching,o=t.searchingForFacetValues,s=t.isSearchStalled,c=t.metadata,u={results:r,searching:a,searchingForFacetValues:o,isSearchStalled:s,error:t.error};return f.getProvidedProps.call(this,e,n,u,c,i)}},{key:"getSearchParameters",value:function(e){return s?f.getSearchParameters.call(this,e,this.props,this.context.ais.store.getState().widgets):null}},{key:"getMetadata",value:function(e){return c?f.getMetadata.call(this,this.props,e):{}}},{key:"transitionState",value:function(e,t){return u?f.transitionState.call(this,this.props,e,t):t}},{key:"render",value:function(){if(null===this.state.props)return null;var e=i?{refine:this.refine,createURL:this.createURL}:{},t=o?{searchForItems:this.searchForFacetValues}:{};return v.createElement(n,Zc({},this.props,this.state.props,e,t))}}]),a}(),F(e,"displayName","".concat(f.displayName,"(").concat((r=n).displayName||r.name||"UnknownComponent",")")),F(e,"defaultClassNames",n.defaultClassNames),F(e,"defaultProps",f.defaultProps),F(e,"contextTypes",{ais:W.object.isRequired,multiIndexContext:W.object}),t}}var ru=function(e,t,n,r){var i=-1,a=Zr,o=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=$(t,St(n))),r?(a=Xr,o=!1):200<=t.length&&(a=ei,o=!1,t=new $r(t));e:for(;++i<s;){var f=e[i],l=null==n?f:n(f);if(f=r||0!==f?f:0,o&&l==l){for(var h=u;h--;)if(t[h]===l)continue e;c.push(f)}else a(t,l,r)||c.push(f)}return c},iu=ri(function(e,t){return ii(e)?ru(e,Nr(t,1,ii,!0)):[]});var au=nu({displayName:"AlgoliaConfigure",getProvidedProps:function(){return{}},getSearchParameters:function(e,t){var n=Vr(t,"children");return e.setQueryParameters(n)},transitionState:function(e,t,n){var r=Vr(e,"children"),i=this._props?iu(Bt(this._props),Bt(e)):[];return this._props=e,Bc(n,F({},"configure",z({},Vr(n.configure,i),r)),this.context)},cleanUp:function(n,e){var r="configure",t=Qc(this.context),i=Lc(this.context)&&e.indices?e.indices[t]:e,a=(i&&i[r]?Object.keys(i[r]):[]).reduce(function(e,t){return n[t]||(e[t]=i[r][t]),e},{});return Bc(e,F({},r,a),this.context)}}),ou=au(function(){return null});function su(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function cu(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(n).filter(function(e){return void 0!==n[e]&&void 0!==n[e][t]}).map(function(e){return function(t,e,n){var r=n[e];switch(e){case"range":return Object.keys(r[t]).map(function(e){return r[t][e]});case"refinementList":return r[t];case"hierarchicalMenu":case"menu":return[r[t]];case"multiRange":return r[t].split(":");case"toggle":return[r[t]];default:return[]}}(t,e,n)}).reduce(function(e,t){return e.concat(t)},[])}var uu=nu({displayName:"AlgoliaQueryRules",defaultProps:{transformItems:function(e){return e},transformRuleContexts:function(e){return e},trackedFilters:{}},getProvidedProps:function(e,t,n){var r=Mc(n,this.context);if(null===r)return{items:[],canRefine:!1};var i=r.userData,a=void 0===i?[]:i,o=(0,e.transformItems)(a);return{items:o,canRefine:0<o.length}},getSearchParameters:function(e,t,n){if(0===Object.keys(t.trackedFilters).length)return e;var r,i,a,o=Lc(this.context)?n.indices[Qc(this.context)]:n,s=(r={searchState:o,trackedFilters:t.trackedFilters},i=r.searchState,a=r.trackedFilters,Object.keys(a).reduce(function(e,t){var n=cu(t,i),r=(0,a[t])(n);return[].concat(su(e),su(n.filter(function(e){return r.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),c=e.ruleContexts||[],u=[].concat(su(c),su(s)),f=t.transformRuleContexts(u).slice(0,10);return e.setQueryParameter("ruleContexts",f)}}),fu=uu(function(){return null});function lu(e,t,n){var r=Uc(e,t,n,"query","");return r||""}var hu=nu({displayName:"AlgoliaAutoComplete",getProvidedProps:function(e,t,n){return{hits:(r=n,r.results?r.results.hits&&Array.isArray(r.results.hits)?r.results.hits:Object.keys(r.results).reduce(function(e,t){return[].concat(su(e),[{index:t,hits:r.results[t].hits}])},[]):[]),currentRefinement:lu(e,t,this.context)};var r},refine:function(e,t,n){return r=t,i=n,a=this.context,Bc(r,F({},"query",i),a,!0);var r,i,a},cleanUp:function(e,t){return n=t,r=this.context,qc(n,r,"query");var n,r},getSearchParameters:function(e,t,n){return e.setQuery(lu(t,n,this.context))}}),du=function(e){return e.attributes[0]};var pu=nu({displayName:"AlgoliaBreadcrumb",propTypes:{attributes:function(e,t,n){if(!Array.isArray(e[t])||e[t].some(function(e){return"string"!=typeof e})||e[t].length<1)return new Error("Invalid prop ".concat(t," supplied to ").concat(n,". Expected an Array of Strings"))},transformItems:W.func},getProvidedProps:function(e,t,n){var r=du(e),i=Mc(n,this.context);if(!(Boolean(i)&&Boolean(i.getFacetByName(r))))return{items:[],canRefine:!1};var a=i.getFacetValues(r),o=a.data?function n(e){return e.reduce(function(e,t){return t.isRefined&&(e.push({label:t.name,value:t.path}),t.data&&(e=e.concat(n(t.data)))),e},[])}(a.data):[],s=e.transformItems?e.transformItems(o):o;return{canRefine:0<s.length,items:s}},refine:function(e,t,n){return r=e,i=t,a=n,o=this.context,Bc(i,F({},du(r),a||""),o,!0,"hierarchicalMenu");var r,i,a,o}}),vu=nu({displayName:"AlgoliaCurrentRefinements",propTypes:{transformItems:W.func},getProvidedProps:function(n,e,t,r){var i=r.reduce(function(e,t){return void 0!==t.items&&(n.clearsQuery||"query"!==t.id)?n.clearsQuery&&"query"===t.id&&""===t.items[0].currentRefinement?e:e.concat(t.items.map(function(e){return z({},e,{id:t.id,index:t.index})})):e},[]),a=n.transformItems?n.transformItems(i):i;return{items:a,canRefine:0<a.length}},refine:function(e,t,n){return(n instanceof Array?n.map(function(e){return e.value}):[n]).reduce(function(e,t){return t(e)},t)}});function mu(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gu=function(e){return[e.northEast.lat,e.northEast.lng,e.southWest.lat,e.southWest.lng].join()},yu=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/,bu=function(e){var t=e.match(yu);return{lat:parseFloat(t[1]),lng:parseFloat(t[2])}},Ru=function(e,t,n){var r=Uc(e,t,n,"boundingBox",{});if(!ca(r))return{northEast:{lat:parseFloat(r.northEast.lat),lng:parseFloat(r.northEast.lng)},southWest:{lat:parseFloat(r.southWest.lat),lng:parseFloat(r.southWest.lng)}}},xu=function(e,t,n){return Bc(e,F({},"boundingBox",t),n,!0)},Fu=nu({displayName:"AlgoliaGeoSearch",getProvidedProps:function(e,t,n){var r,i,a=Mc(n,this.context),o=Ru(e,t,this.context),s=a&&a._state.insideBoundingBox&&(r=a._state.insideBoundingBox,i=r.split(","),{northEast:{lat:parseFloat(i[0]),lng:parseFloat(i[1])},southWest:{lat:parseFloat(i[2]),lng:parseFloat(i[3])}})||void 0,c=function(e,t,n){e.defaultRefinement;var r=mu(e,["defaultRefinement"]),i=Uc(r,t,n,"aroundLatLng");if(i)return i;var a=Uc(r,t,n,"configure.aroundLatLng");return a&&bu(a)}(e,t,this.context),u=a&&a._state.aroundLatLng&&bu(a._state.aroundLatLng)||void 0,f=o||s,l=c||u;return{hits:a?a.hits.filter(function(e){return Boolean(e._geoloc)}):[],isRefinedWithMap:Boolean(f),currentRefinement:f,position:l}},refine:function(e,t,n){return xu(t,n,this.context)},getSearchParameters:function(e,t,n){var r=Ru(t,n,this.context);return r?e.setQueryParameter("insideBoundingBox",gu(r)):e},cleanUp:function(e,t){return qc(t,this.context,"boundingBox")},getMetadata:function(e,t){var n=this,r=[],i="boundingBox",a=Qc(this.context),o={},s=Ru(e,t,this.context);return s&&r.push({label:"".concat(i,": ").concat(gu(s)),value:function(e){return xu(e,o,n.context)},currentRefinement:s}),{id:i,index:a,items:r}},shouldComponentUpdate:function(){return!0}}),_u=function(e){return e.attributes[0]},ju="hierarchicalMenu";function Pu(e,t,n){var r=Uc(e,t,n,"".concat(ju,".").concat(_u(e)),null);return""===r?null:r}function wu(e,l,h,d){return e.map(function(e){return{label:e.name,value:(t=e.path,n=l,r=h,i=d,a=n.id,o=n.attributes,s=n.separator,c=n.rootPath,u=n.showParentLevel,f=Pu(n,r,i),null===f?t:new Oc.SearchParameters({hierarchicalFacets:[{name:a,attributes:o,separator:s,rootPath:c,showParentLevel:u}]}).toggleHierarchicalFacetRefinement(a,f).toggleHierarchicalFacetRefinement(a,t).getHierarchicalRefinement(a)[0]),count:e.count,isRefined:e.isRefined,items:e.data&&wu(e.data,l,h,d)};var t,n,r,i,a,o,s,c,u,f})}function Su(e,t,n,r){return Bc(t,F({},_u(e),n||""),r,!0,ju)}var Ou=["name:asc"],Au=nu({displayName:"AlgoliaHierarchicalMenu",propTypes:{attributes:function(e,t,n){if(!Array.isArray(e[t])||e[t].some(function(e){return"string"!=typeof e})||e[t].length<1)return new Error("Invalid prop ".concat(t," supplied to ").concat(n,". Expected an Array of Strings"))},separator:W.string,rootPath:W.string,showParentLevel:W.bool,defaultRefinement:W.string,showMore:W.bool,limit:W.number,showMoreLimit:W.number,transformItems:W.func},defaultProps:{showMore:!1,limit:10,showMoreLimit:20,separator:" > ",rootPath:null,showParentLevel:!0},getProvidedProps:function(e,t,n){var r=e.showMore,i=e.limit,a=e.showMoreLimit,o=_u(e),s=Mc(n,this.context);if(!(Boolean(s)&&Boolean(s.getFacetByName(o))))return{items:[],currentRefinement:Pu(e,t,this.context),canRefine:!1};var c=r?a:i,u=s.getFacetValues(o,{sortBy:Ou}),f=u.data?wu(u.data,e,t,this.context):[],l=e.transformItems?e.transformItems(f):f;return{items:function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e.slice(0,n).map(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e.items)?z({},e,{items:t(e.items,n)}):e})}(l,c),currentRefinement:Pu(e,t,this.context),canRefine:0<l.length}},refine:function(e,t,n){return Su(e,t,n,this.context)},cleanUp:function(e,t){return n=e,r=t,i=this.context,qc(r,i,"".concat(ju,".").concat(_u(n)));var n,r,i},getSearchParameters:function(e,t,n){var r=t.attributes,i=t.separator,a=t.rootPath,o=t.showParentLevel,s=t.showMore,c=t.limit,u=t.showMoreLimit,f=_u(t),l=s?u:c;e=e.addHierarchicalFacet({name:f,attributes:r,separator:i,rootPath:a,showParentLevel:o}).setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,l)});var h=Pu(t,n,this.context);return null!==h&&(e=e.toggleHierarchicalFacetRefinement(f,h)),e},getMetadata:function(t,e){var n=this,r=t.attributes[0],i=_u(t),a=Pu(t,e,this.context);return{id:i,index:Qc(this.context),items:a?[{label:"".concat(r,": ").concat(a),attribute:r,value:function(e){return Su(t,e,"",n.context)},currentRefinement:a}]:[]}}}),Eu=function(e){var t=e.attribute,n=e.hit,r=e.highlightProperty,i=e.preTag,a=void 0===i?Hc.highlightPreTag:i,o=e.postTag;return function(e){var t=e.preTag,n=void 0===t?"<em>":t,r=e.postTag,i=void 0===r?"</em>":r,a=e.highlightProperty,o=e.attribute,s=e.hit;if(!s)throw new Error("`hit`, the matching record, must be provided");var c=Ci(s[a],o,{});return Array.isArray(c)?c.map(function(e){return Dc({preTag:n,postTag:i,highlightedValue:e.value})}):Dc({preTag:n,postTag:i,highlightedValue:c.value})}({attribute:t,highlightProperty:r,hit:n,preTag:a,postTag:void 0===o?Hc.highlightPostTag:o})},Tu=nu({displayName:"AlgoliaHighlighter",propTypes:{},getProvidedProps:function(){return{highlight:Eu}}}),Nu=nu({displayName:"AlgoliaHits",getProvidedProps:function(e,t,n){var r=Mc(n,this.context);return r?{hits:Ic(Nc(r.hits,r.hitsPerPage,r.page),r.queryID)}:{hits:[]}},getSearchParameters:function(e){return e}});function Iu(e,t,n){var r=Uc(e,t,n,"hitsPerPage",null);return"string"==typeof r?parseInt(r,10):r}var Cu=nu({displayName:"AlgoliaHitsPerPage",propTypes:{defaultRefinement:W.number.isRequired,items:W.arrayOf(W.shape({label:W.string,value:W.number.isRequired})).isRequired,transformItems:W.func},getProvidedProps:function(e,t){var n=Iu(e,t,this.context),r=e.items.map(function(e){return e.value===n?z({},e,{isRefined:!0}):z({},e,{isRefined:!1})});return{items:e.transformItems?e.transformItems(r):r,currentRefinement:n}},refine:function(e,t,n){return Bc(t,F({},"hitsPerPage",n),this.context,!0)},cleanUp:function(e,t){return qc(t,this.context,"hitsPerPage")},getSearchParameters:function(e,t,n){return e.setHitsPerPage(Iu(t,n,this.context))},getMetadata:function(){return{id:"hitsPerPage"}}});function Hu(e,t,n){var r=Uc(e,t,n,"page",1);return"string"==typeof r?parseInt(r,10):r}var Du=nu({displayName:"AlgoliaInfiniteHits",getProvidedProps:function(e,t,n){var r=this,i=Mc(n,this.context);if(this._allResults=this._allResults||[],this._prevState=this._prevState||{},!i)return{hits:[],hasPrevious:!1,hasMore:!1,refine:function(){},refinePrevious:function(){},refineNext:function(){}};var a=i.page,o=i.hits,s=i.hitsPerPage,c=i.nbPages,u=i._state,f=((u=void 0===u?{}:u).page,mu(u,["page"])),l=Ic(Nc(o,s,a),i.queryID);void 0!==this._firstReceivedPage&&ua(f,this._prevState)?this._lastReceivedPage<a?(this._allResults=[].concat(su(this._allResults),su(l)),this._lastReceivedPage=a):this._firstReceivedPage>a&&(this._allResults=[].concat(su(l),su(this._allResults)),this._firstReceivedPage=a):(this._allResults=su(l),this._firstReceivedPage=a,this._lastReceivedPage=a),this._prevState=f;var h=0<this._firstReceivedPage,d=a<c-1;return{hits:this._allResults,hasPrevious:h,hasMore:d,refinePrevious:function(e){return r.refine(e,r._firstReceivedPage-1)},refineNext:function(e){return r.refine(e,r._lastReceivedPage+1)}}},getSearchParameters:function(e,t,n){return e.setQueryParameters({page:Hu(t,n,this.context)-1})},refine:function(e,t,n,r){void 0===r&&void 0!==this._lastReceivedPage?r=this._lastReceivedPage+1:void 0===r&&(r=Hu(e,t,this.context));return Bc(t,F({},"page",r+1),this.context,!1)}}),Qu="menu";function Mu(e){return e.attribute}function Lu(e,t,n){var r=Uc(e,t,n,"".concat(Qu,".").concat(Mu(e)),null);return""===r?null:r}function Bu(e,t,n,r){return e===Lu(t,n,r)?"":e}function ku(e){var t=e.showMore,n=e.limit,r=e.showMoreLimit;return t?r:n}function Uu(e,t,n,r){return Bc(t,F({},Mu(e),n||""),r,!0,Qu)}var qu=["count:desc","name:asc"],Vu=nu({displayName:"AlgoliaMenu",propTypes:{attribute:W.string.isRequired,showMore:W.bool,limit:W.number,showMoreLimit:W.number,defaultRefinement:W.string,transformItems:W.func,searchable:W.bool},defaultProps:{showMore:!1,limit:10,showMoreLimit:20},getProvidedProps:function(t,n,e,r,i){var a=this,o=t.attribute,s=t.searchable,c=Mc(e,this.context),u=Boolean(c)&&Boolean(c.getFacetByName(o)),f=Boolean(i&&i[o]&&""!==i.query);if(s&&this.context.multiIndexContext)throw new Error("react-instantsearch: searching in *List is not available when used inside a multi index context");if(!u)return{items:[],currentRefinement:Lu(t,n,this.context),isFromSearch:f,searchable:s,canRefine:u};var l=f?i[o].map(function(e){return{label:e.value,value:Bu(e.value,t,n,a.context),_highlightResult:{label:{value:e.highlighted}},count:e.count,isRefined:e.isRefined}}):c.getFacetValues(o,{sortBy:qu}).map(function(e){return{label:e.name,value:Bu(e.name,t,n,a.context),count:e.count,isRefined:e.isRefined}}),h=s&&!f?lo(l,["isRefined","count","label"],["desc","desc","asc"]):l,d=t.transformItems?t.transformItems(h):h;return{items:d.slice(0,ku(t)),currentRefinement:Lu(t,n,this.context),isFromSearch:f,searchable:s,canRefine:0<d.length}},refine:function(e,t,n){return Uu(e,t,n,this.context)},searchForFacetValues:function(e,t,n){return{facetName:e.attribute,query:n,maxFacetHits:ku(e)}},cleanUp:function(e,t){return n=e,r=t,i=this.context,qc(r,i,"".concat(Qu,".").concat(Mu(n)));var n,r,i},getSearchParameters:function(e,t,n){var r=t.attribute;e=(e=e.setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,ku(t))})).addDisjunctiveFacet(r);var i=Lu(t,n,this.context);return null!==i&&(e=e.addDisjunctiveFacetRefinement(r,i)),e},getMetadata:function(t,e){var n=this,r=Mu(t),i=Lu(t,e,this.context);return{id:r,index:Qc(this.context),items:null===i?[]:[{label:"".concat(t.attribute,": ").concat(i),attribute:t.attribute,value:function(e){return Uu(t,e,"",n.context)},currentRefinement:i}]}}});function Wu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function zu(e){return void 0===e.start&&void 0===e.end?"":"".concat(e.start?e.start:"",":").concat(e.end?e.end:"")}var $u="multiRange";function Ku(e){return e.attribute}function Gu(e,t,n){return Uc(e,t,n,"".concat($u,".").concat(Ku(e)),"")}function Ju(e,t,n,r){return Bc(t,F({},Ku(e),n),r,!0,$u)}var Yu=nu({displayName:"AlgoliaNumericMenu",propTypes:{id:W.string,attribute:W.string.isRequired,items:W.arrayOf(W.shape({label:W.node,start:W.number,end:W.number})).isRequired,transformItems:W.func},getProvidedProps:function(v,e,t){var n=v.attribute,m=Gu(v,e,this.context),g=Mc(t,this.context),r=v.items.map(function(e){var t,n,r,i,a,o,s,c,u,f,l,h,d,p=zu(e);return{label:e.label,value:p,isRefined:p===m,noRefinement:!!g&&(t=Ku(v),n=g,r=p,f=n.getFacetByName(t)?n.getFacetStats(t):null,l=r.split(":"),h=0===Number(l[0])||""===r?Number.NEGATIVE_INFINITY:Number(l[0]),d=0===Number(l[1])||""===r?Number.POSITIVE_INFINITY:Number(l[1]),!(Boolean(f)&&(c=h,u=d,(s=f).min>c&&s.min<u||s.max>c&&s.max<u||(o=d,(a=h)>(i=f).min&&a<i.max||o>i.min&&o<i.max))))}}),i=g&&g.getFacetByName(n)?g.getFacetStats(n):null,a=va(r,function(e){return!0===e.isRefined});r.some(function(e){return""===e.value})||r.push({value:"",isRefined:ca(a),noRefinement:!i,label:"All"});var o=v.transformItems?v.transformItems(r):r;return{items:o,currentRefinement:m,canRefine:0<o.length&&o.some(function(e){return!1===e.noRefinement})}},refine:function(e,t,n){return Ju(e,t,n,this.context)},cleanUp:function(e,t){return n=e,r=t,i=this.context,qc(r,i,"".concat($u,".").concat(Ku(n)));var n,r,i},getSearchParameters:function(e,t,n){var r=t.attribute,i=function(e){if(0===e.length)return{start:null,end:null};var t=Wu(e.split(":"),2),n=t[0],r=t[1];return{start:0<n.length?parseInt(n,10):null,end:0<r.length?parseInt(r,10):null}}(Gu(t,n,this.context)),a=i.start,o=i.end;return e=e.addDisjunctiveFacet(r),a&&(e=e.addNumericRefinement(r,">=",a)),o&&(e=e.addNumericRefinement(r,"<=",o)),e},getMetadata:function(t,e){var n=this,r=Ku(t),i=Gu(t,e,this.context),a=[],o=Qc(this.context);if(""!==i){var s=va(t.items,function(e){return zu(e)===i}).label;a.push({label:"".concat(t.attribute,": ").concat(s),attribute:t.attribute,currentRefinement:s,value:function(e){return Ju(t,e,"",n.context)}})}return{id:r,index:o,items:a}}});function Zu(e,t,n){var r=Uc(e,t,n,"page",1);return"string"==typeof r?parseInt(r,10):r}var Xu=nu({displayName:"AlgoliaPagination",getProvidedProps:function(e,t,n){var r=Mc(n,this.context);if(!r)return null;var i=r.nbPages;return{nbPages:i,currentRefinement:Zu(e,t,this.context),canRefine:1<i}},refine:function(e,t,n){return r=t,i=n,a=this.context,Bc(r,F({},"page",i),a,!1);var r,i,a},cleanUp:function(e,t){return qc(t,this.context,"page")},getSearchParameters:function(e,t,n){return e.setPage(Zu(t,n,this.context)-1)},getMetadata:function(){return{id:"page"}}}),ef=nu({displayName:"AlgoliaPoweredBy",getProvidedProps:function(){var e="undefined"==typeof window;return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&"+"utm_content=".concat(e?"":window.location.hostname,"&")+"utm_campaign=poweredby"}}}),tf=fe.isFinite;var nf=function(e){return"number"==typeof e&&tf(e)};function rf(e){return e.attribute}var af="range";function of(e,t,n,r){var i=Uc(e,t,r,"".concat(af,".").concat(rf(e)),{}),a=i.min,o=i.max,s=Boolean(e.precision),c=a;"string"==typeof c&&(c=s?parseFloat(c):parseInt(c,10));var u=o;"string"==typeof u&&(u=s?parseFloat(u):parseInt(u,10));var f={min:c,max:u},l=void 0!==e.min,h=void 0!==e.max,d=void 0!==f.min,p=void 0!==f.max;if(l&&d&&f.min<n.min)throw Error("You can't provide min value lower than range.");if(h&&p&&f.max>n.max)throw Error("You can't provide max value greater than range.");return l&&!d&&(f.min=n.min),h&&!p&&(f.max=n.max),f}function sf(e,t){return{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max}}function cf(e,t,n,r){return e||n!==r?e&&t?n:r:void 0}function uf(e,t,n,r,i){var a=n.min,o=n.max,s=r.min,c=r.max,u=void 0===a||""===a,f=void 0===o||""===o,l=u?void 0:parseFloat(a),h=f?void 0:parseFloat(o),d=u||nf(l),p=f||nf(h);if(!d||!p)throw Error("You can't provide non finite values to the range connector.");if(l<s)throw Error("You can't provide min value lower than range.");if(c<h)throw Error("You can't provide max value greater than range.");return Bc(t,F({},rf(e),{min:cf(void 0!==e.min,u,s,l),max:cf(void 0!==e.max,f,c,h)}),i,!0,af)}var ff=nu({displayName:"AlgoliaRange",propTypes:{id:W.string,attribute:W.string.isRequired,defaultRefinement:W.shape({min:W.number,max:W.number}),min:W.number,max:W.number,precision:W.number,header:W.node,footer:W.node},defaultProps:{precision:0},getProvidedProps:function(e,t,n){var r,i,a,o,s,c,u=e.attribute,f=e.precision,l=e.min,h=e.max,d=Mc(n,this.context),p=d&&d.getFacetByName(u),v=p&&d.getFacetStats(u)||{},m=(p?d.getFacetValues(u):[]).map(function(e){return{value:e.name,count:e.count}}),g=(r={min:l,max:h},i=v,a=f,c=Math.pow(10,a),o=nf(r.min)?r.min:nf(i.min)?i.min:void 0,s=nf(r.max)?r.max:nf(i.max)?i.max:void 0,{min:void 0!==o?Math.floor(o*c)/c:o,max:void 0!==s?Math.ceil(s*c)/c:s}),y=g.min,b=g.max;this._currentRange={min:y,max:b};var R=of(e,t,this._currentRange,this.context);return{min:y,max:b,canRefine:0<m.length,currentRefinement:sf(R,this._currentRange),count:m,precision:f}},refine:function(e,t,n){return uf(e,t,n,this._currentRange,this.context)},cleanUp:function(e,t){return n=e,r=t,i=this.context,qc(r,i,"".concat(af,".").concat(rf(n)));var n,r,i},getSearchParameters:function(e,t,n){var r=t.attribute,i=of(t,n,this._currentRange,this.context),a=i.min,o=i.max;return e=e.addDisjunctiveFacet(r),void 0!==a&&(e=e.addNumericRefinement(r,">=",a)),void 0!==o&&(e=e.addNumericRefinement(r,"<=",o)),e},getMetadata:function(t,e){var n=this,r=this._currentRange,i=r.min,a=r.max,o=of(t,e,this._currentRange,this.context),s=o.min,c=o.max,u=[],f=void 0!==s,l=void 0!==c;if(f&&s!==i||l&&c!==a){var h=[f?"".concat(s," <= "):"",t.attribute,l?" <= ".concat(c):""];u.push({label:h.join(""),attribute:t.attribute,value:function(e){return uf(t,e,{},n._currentRange,n.context)},currentRefinement:sf({min:s,max:c},{min:i,max:a})})}return{id:rf(t),index:Qc(this.context),items:u}}}),lf="refinementList";function hf(e){return e.attribute}function df(e,t,n){var r=Uc(e,t,n,"".concat(lf,".").concat(hf(e)),[]);return"string"!=typeof r?r:r?[r]:[]}function pf(t,e,n,r){var i=df(e,n,r);return-1===i.indexOf(t)?i.concat([t]):i.filter(function(e){return e!==t})}function vf(e){var t=e.showMore,n=e.limit,r=e.showMoreLimit;return t?r:n}function mf(e,t,n,r){return Bc(t,F({},hf(e),0<n.length?n:""),r,!0,lf)}var gf=["isRefined","count:desc","name:asc"],yf=nu({displayName:"AlgoliaRefinementList",propTypes:{id:W.string,attribute:W.string.isRequired,operator:W.oneOf(["and","or"]),showMore:W.bool,limit:W.number,showMoreLimit:W.number,defaultRefinement:W.arrayOf(W.oneOfType([W.string,W.number])),searchable:W.bool,transformItems:W.func},defaultProps:{operator:"or",showMore:!1,limit:10,showMoreLimit:20},getProvidedProps:function(t,n,e,r,i){var a=this,o=t.attribute,s=t.searchable,c=Mc(e,this.context),u=Boolean(c)&&Boolean(c.getFacetByName(o)),f=Boolean(i&&i[o]&&""!==i.query);if(s&&this.context.multiIndexContext)throw new Error("react-instantsearch: searching in *List is not available when used inside a multi index context");if(!u)return{items:[],currentRefinement:df(t,n,this.context),canRefine:u,isFromSearch:f,searchable:s};var l=f?i[o].map(function(e){return{label:e.value,value:pf(e.value,t,n,a.context),_highlightResult:{label:{value:e.highlighted}},count:e.count,isRefined:e.isRefined}}):c.getFacetValues(o,{sortBy:gf}).map(function(e){return{label:e.name,value:pf(e.name,t,n,a.context),count:e.count,isRefined:e.isRefined}}),h=t.transformItems?t.transformItems(l):l;return{items:h.slice(0,vf(t)),currentRefinement:df(t,n,this.context),isFromSearch:f,searchable:s,canRefine:0<h.length}},refine:function(e,t,n){return mf(e,t,n,this.context)},searchForFacetValues:function(e,t,n){return{facetName:e.attribute,query:n,maxFacetHits:vf(e)}},cleanUp:function(e,t){return n=e,r=t,i=this.context,qc(r,i,"".concat(lf,".").concat(hf(n)));var n,r,i},getSearchParameters:function(e,t,n){var r=t.attribute,i="and"===t.operator?"addFacet":"addDisjunctiveFacet",a="".concat(i,"Refinement");return e=(e=e.setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,vf(t))}))[i](r),df(t,n,this.context).reduce(function(e,t){return e[a](r,t)},e)},getMetadata:function(r,i){var e=hf(r),a=this.context;return{id:e,index:Qc(this.context),items:0<df(r,i,a).length?[{attribute:r.attribute,label:"".concat(r.attribute,": "),currentRefinement:df(r,i,a),value:function(e){return mf(r,e,[],a)},items:df(r,i,a).map(function(n){return{label:"".concat(n),value:function(e){var t=df(r,e,a).filter(function(e){return e!==n});return mf(r,i,t,a)}}})}]:[]}}}),bf=nu({displayName:"AlgoliaScrollTo",propTypes:{scrollOn:W.string},defaultProps:{scrollOn:"page"},getProvidedProps:function(e,t){var n=e.scrollOn,r=Uc(e,t,this.context,n,null);this._prevSearchState||(this._prevSearchState={}),Lc(this.context)&&(t=t.indices?t.indices[Qc(this.context)]:{});var i=Vr(Vr(t,"configure"),n),a=Ac(this._prevSearchState,i);return this._prevSearchState=i,{value:r,hasNotChanged:a}}});function Rf(e,t,n){var r=Uc(e,t,n,"query","");return r||""}function xf(e,t,n,r){return Bc(t,F({},"query",n),r,!0)}var Ff=nu({displayName:"AlgoliaSearchBox",propTypes:{defaultRefinement:W.string},getProvidedProps:function(e,t,n){return{currentRefinement:Rf(e,t,this.context),isSearchStalled:n.isSearchStalled}},refine:function(e,t,n){return xf(0,t,n,this.context)},cleanUp:function(e,t){return n=t,r=this.context,qc(n,r,"query");var n,r},getSearchParameters:function(e,t,n){return e.setQuery(Rf(t,n,this.context))},getMetadata:function(e,t){var n=this,r=Rf(e,t,this.context);return{id:"query",index:Qc(this.context),items:null===r?[]:[{label:"".concat("query",": ").concat(r),value:function(e){return xf(0,e,"",n.context)},currentRefinement:r}]}}});function _f(e,t,n){var r=Uc(e,t,n,"sortBy",null);return r||null}var jf=nu({displayName:"AlgoliaSortBy",propTypes:{defaultRefinement:W.string,items:W.arrayOf(W.shape({label:W.string,value:W.string.isRequired})).isRequired,transformItems:W.func},getProvidedProps:function(e,t){var n=_f(e,t,this.context),r=e.items.map(function(e){return e.value===n?z({},e,{isRefined:!0}):z({},e,{isRefined:!1})});return{items:e.transformItems?e.transformItems(r):r,currentRefinement:n}},refine:function(e,t,n){return Bc(t,F({},"sortBy",n),this.context,!0)},cleanUp:function(e,t){return qc(t,this.context,"sortBy")},getSearchParameters:function(e,t,n){var r=_f(t,n,this.context);return e.setIndex(r)},getMetadata:function(){return{id:"sortBy"}}}),Pf=nu({displayName:"AlgoliaStateResults",getProvidedProps:function(e,t,n){return{searchState:t,searchResults:Mc(n,this.context),allSearchResults:n.results,searching:n.searching,isSearchStalled:n.isSearchStalled,error:n.error,searchingForFacetValues:n.searchingForFacetValues,props:e}}}),wf=nu({displayName:"AlgoliaStats",getProvidedProps:function(e,t,n){var r=Mc(n,this.context);return r?{nbHits:r.nbHits,processingTimeMS:r.processingTimeMS}:null}});function Sf(e){return e.attribute}var Of="toggle";function Af(e,t,n){var r=Uc(e,t,n,"".concat(Of,".").concat(Sf(e)),!1);return r||!1}function Ef(e,t,n,r){return Bc(t,F({},Sf(e),n||!1),r,!0,Of)}var Tf=nu({displayName:"AlgoliaToggle",propTypes:{label:W.string.isRequired,attribute:W.string.isRequired,value:W.any.isRequired,filter:W.func,defaultRefinement:W.bool},getProvidedProps:function(e,t,n){var r=e.attribute,i=e.value,a=Mc(n,this.context),o=Af(e,t,this.context),s=a&&a.getFacetByName(r)?a.getFacetValues(r):null,c=s&&s.length?va(s,function(e){return e.name===i.toString()}):null,u=c&&c.count,f=s&&s.length?s.reduce(function(e,t){return e+t.count},0):null;return{currentRefinement:o,canRefine:o?null!==f&&0<f:null!==u&&0<u,count:{checked:f,unchecked:u}}},refine:function(e,t,n){return Ef(e,t,n,this.context)},cleanUp:function(e,t){return n=e,r=t,i=this.context,qc(r,i,"".concat(Of,".").concat(Sf(n)));var n,r,i},getSearchParameters:function(e,t,n){var r=t.attribute,i=t.value,a=t.filter,o=Af(t,n,this.context),s=e.addDisjunctiveFacet(r);return o&&(s=s.addDisjunctiveFacetRefinement(r,i),a&&(s=a(s))),s},getMetadata:function(t,e){var n=this,r=Sf(t),i=Af(t,e,this.context),a=[],o=Qc(this.context);return i&&a.push({label:t.label,currentRefinement:i,attribute:t.attribute,value:function(e){return Ef(t,e,!1,n.context)}}),{id:r,index:o,items:a}}});var Nf=function(r,i,a){return function(e,t){if("function"!=typeof r)throw new TypeError("Expected insightsClient to be a Function");var n=function(e){var t=e.method,n=e.results,r=e.currentHit,i=n.index,a=r.__queryID,o=[r.objectID];switch(t){case"clickedObjectIDsAfterSearch":return{index:i,queryID:a,objectIDs:o,positions:[r.__position]};case"convertedObjectIDsAfterSearch":return{index:i,queryID:a,objectIDs:o};default:throw new Error('Unsupported method "'.concat(t,'" passed to the insights function. The supported methods are: "clickedObjectIDsAfterSearch", "convertedObjectIDsAfterSearch".'))}}({method:e,results:i,currentHit:a});r(e,z({},n,t))}};e.Configure=ou,e.HIGHLIGHT_TAGS=Hc,e.QueryRuleContext=fu,e.connectAutoComplete=hu,e.connectBreadcrumb=pu,e.connectConfigure=au,e.connectCurrentRefinements=vu,e.connectGeoSearch=Fu,e.connectHierarchicalMenu=Au,e.connectHighlight=Tu,e.connectHitInsights=function(i){return nu({displayName:"AlgoliaInsights",getProvidedProps:function(e,t,n){var r=Mc(n,this.context);return{insights:Nf(i,r,e.hit)}}})},e.connectHits=Nu,e.connectHitsPerPage=Cu,e.connectInfiniteHits=Du,e.connectMenu=Vu,e.connectNumericMenu=Yu,e.connectPagination=Xu,e.connectPoweredBy=ef,e.connectQueryRules=uu,e.connectRange=ff,e.connectRefinementList=yf,e.connectScrollTo=bf,e.connectSearchBox=Ff,e.connectSortBy=jf,e.connectStateResults=Pf,e.connectStats=wf,e.connectToggleRefinement=Tf,e.createConnector=nu,e.createIndex=function(e){var t=function(e){var t=e.indexName,n=e.indexId,r=e.root,i=e.children;return v.createElement(Yc,{indexName:t,indexId:n||t,root:r},i)};return t.defaultProps={root:e},t},e.createInstantSearch=function(o,e){var t,n;return n=t=function(e){function a(){var e,t;m(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if((t=b(this,(e=R(a)).call.apply(e,[this].concat(r)))).props.searchClient&&(t.props.appId||t.props.apiKey||t.props.algoliaClient))throw new Error("react-instantsearch:: `searchClient` cannot be used with `appId`, `apiKey` or `algoliaClient`.");return t.props.algoliaClient&&console.warn("`algoliaClient` option was renamed `searchClient`. Please use this new option before the next major version."),t.client=t.props.searchClient||t.props.algoliaClient||o(t.props.appId,t.props.apiKey,{_useRequestCache:!0}),"function"==typeof t.client.addAlgoliaAgent&&(t.client.addAlgoliaAgent("react (".concat(v.version,")")),t.client.addAlgoliaAgent("react-instantsearch (".concat(Jc,")"))),t}return x(a,p.Component),g(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props;e.searchClient?this.client=e.searchClient:e.algoliaClient?this.client=e.algoliaClient:t.appId===e.appId&&t.apiKey===e.apiKey||(this.client=o(e.appId,e.apiKey)),"function"==typeof this.client.addAlgoliaAgent&&(this.client.addAlgoliaAgent("react (".concat(v.version,")")),this.client.addAlgoliaAgent("react-instantsearch (".concat(Jc,")")))}},{key:"render",value:function(){return v.createElement(Gc,{createURL:this.props.createURL,indexName:this.props.indexName,searchState:this.props.searchState,onSearchStateChange:this.props.onSearchStateChange,onSearchParameters:this.props.onSearchParameters,root:this.props.root,searchClient:this.client,algoliaClient:this.client,refresh:this.props.refresh,resultsState:this.props.resultsState},this.props.children)}}]),a}(),F(t,"defaultProps",{refresh:!1,root:e}),n},e.translatable=function(s){return function(t){var e=function(e){function i(){var e,o;m(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F(y(o=b(this,(e=R(i)).call.apply(e,[this].concat(n)))),"translate",function(e){var t=o.props.translations,n=t&&tu(t,e)?t[e]:s[e];if("function"!=typeof n)return n;for(var r=arguments.length,i=new Array(1<r?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return n.apply(void 0,i)}),o}return x(i,p.Component),g(i,[{key:"render",value:function(){return v.createElement(t,Zc({translate:this.translate},this.props))}}]),i}(),n=t.displayName||t.name||"UnknownComponent";return e.displayName="Translatable(".concat(n,")"),e}},e.version=Jc,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
