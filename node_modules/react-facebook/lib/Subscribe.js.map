{"version":3,"sources":["../src/Subscribe.jsx"],"names":["LoginStatus","api","event","props","setState","subscribe","handleChange","onChange","componentWillUnmount","state","unsubscribe","render","children","handleReady","Component","undefined"],"mappings":";;;;;;;;;;;;;;;;;AACA;;AACA;;IAYqBA,W;;;;;;;;;;;;;wFAKJ,E;8FASD,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJC,cAAAA,KADI,GACM,MAAKC,KADX,CACJD,KADI;;AAGZ,oBAAKE,QAAL,CAAc;AACZH,gBAAAA,GAAG,EAAHA;AADY,eAAd;;AAHY;AAAA,gDAONA,GAAG,CAACI,SAAJ,CAAcH,KAAd,EAAqB,MAAKI,YAA1B,CAPM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;+FAUC,YAAmB;AAAA,UACxBC,QADwB,GACX,MAAKJ,KADM,CACxBI,QADwB;;AAGhC,UAAIA,QAAJ,EAAc;AACZA,QAAAA,QAAQ,MAAR;AACD;AACF,K;;;;;;SAvBDC,oB,GAAA,gCAAuB;AAAA,QACJP,GADI,GACwB,IADxB,CACbQ,KADa,CACJR,GADI;AAAA,QACYC,KADZ,GACwB,IADxB,CACGC,KADH,CACYD,KADZ;;AAErB,QAAID,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACS,WAAJ,CAAgBR,KAAhB,EAAuB,KAAKI,YAA5B;AACD;AACF,G;;SAoBDK,M,GAAA,kBAAS;AAAA,QACCC,QADD,GACc,KAAKT,KADnB,CACCS,QADD;AAGP,WACE,6BAAC,mBAAD;AAAY,MAAA,OAAO,EAAE,KAAKC;AAA1B,OACGD,QADH,CADF;AAKD,G;;;EAxCsCE,gB;;;8BAApBd,W,kBACG;AACpBO,EAAAA,QAAQ,EAAEQ;AADU,C","sourcesContent":["// @flow\nimport React, { Component, type Node } from 'react';\nimport Initialize from './Initialize';\n\ntype Props = {\n  children: Node,\n  onChange?: Function,\n  event: string,\n};\n\ntype State = {\n  api?: Object,\n};\n\nexport default class LoginStatus extends Component<Props, State> {\n  static defaultProps = {\n    onChange: undefined,\n  };\n\n  state: State = {};\n\n  componentWillUnmount() {\n    const { state: { api }, props: { event } } = this;\n    if (api) {\n      api.unsubscribe(event, this.handleChange);\n    }\n  }\n\n  handleReady = async (api: Object): Promise<void> => {\n    const { event } = this.props;\n\n    this.setState({\n      api,\n    });\n\n    await api.subscribe(event, this.handleChange);\n  }\n\n  handleChange = (...args): void => {\n    const { onChange } = this.props;\n\n    if (onChange) {\n      onChange(...args);\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <Initialize onReady={this.handleReady}>\n        {children}\n      </Initialize>\n    );\n  }\n}\n"],"file":"Subscribe.js"}